import{a as Ke}from"./chunk-DX2KS5OT.js";import{a as je}from"./chunk-2XHOXA44.js";import"./chunk-FB7L5IGW.js";import"./chunk-QL37M2GK.js";import"./chunk-RQBE5H4E.js";import"./chunk-X3TEJXCB.js";import"./chunk-SIS52AS7.js";import"./chunk-SJOCS2JA.js";import{a as Ze}from"./chunk-YHDRG5ST.js";import{a as Ne}from"./chunk-LJTTABSP.js";import{b as Qe,c as Je,d as ce,g as ge}from"./chunk-3LUGFZTG.js";import{l as ke,p as qe}from"./chunk-E7LIQX2C.js";import"./chunk-KMQRAFUQ.js";import{D as Ge,M as Ue,P as Ye,Q as Xe,R as He,S as We,T as Ve,U as ze,V as Be,W as fe,q as be,y as Pe}from"./chunk-THZ5HTBN.js";import{b as ct,d as Te,j as $e}from"./chunk-B5LBP65L.js";import"./chunk-2GZW2XWB.js";import"./chunk-APJUBL5S.js";import"./chunk-BYZEYO7O.js";import"./chunk-MOFZY53X.js";import"./chunk-2FSENJOC.js";import{a as te,b as le,c as me,f as pr}from"./chunk-6PMQQMX7.js";var Ce=me((ae,Le)=>{"use strict";(function(A,T){typeof ae=="object"&&typeof Le=="object"?Le.exports=T():typeof define=="function"&&define.amd?define([],T):typeof ae=="object"?ae.layoutBase=T():A.layoutBase=T()})(ae,function(){return(function(C){var A={};function T(u){if(A[u])return A[u].exports;var o=A[u]={i:u,l:!1,exports:{}};return C[u].call(o.exports,o,o.exports,T),o.l=!0,o.exports}return T.m=C,T.c=A,T.i=function(u){return u},T.d=function(u,o,a){T.o(u,o)||Object.defineProperty(u,o,{configurable:!1,enumerable:!0,get:a})},T.n=function(u){var o=u&&u.__esModule?function(){return u.default}:function(){return u};return T.d(o,"a",o),o},T.o=function(u,o){return Object.prototype.hasOwnProperty.call(u,o)},T.p="",T(T.s=28)})([(function(C,A,T){"use strict";function u(){}u.QUALITY=1,u.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,u.DEFAULT_INCREMENTAL=!1,u.DEFAULT_ANIMATION_ON_LAYOUT=!0,u.DEFAULT_ANIMATION_DURING_LAYOUT=!1,u.DEFAULT_ANIMATION_PERIOD=50,u.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,u.DEFAULT_GRAPH_MARGIN=15,u.NODE_DIMENSIONS_INCLUDE_LABELS=!1,u.SIMPLE_NODE_SIZE=40,u.SIMPLE_NODE_HALF_SIZE=u.SIMPLE_NODE_SIZE/2,u.EMPTY_COMPOUND_NODE_SIZE=40,u.MIN_EDGE_LENGTH=1,u.WORLD_BOUNDARY=1e6,u.INITIAL_WORLD_BOUNDARY=u.WORLD_BOUNDARY/1e3,u.WORLD_CENTER_X=1200,u.WORLD_CENTER_Y=900,C.exports=u}),(function(C,A,T){"use strict";var u=T(2),o=T(8),a=T(9);function r(f,t,g){u.call(this,g),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=g,this.bendpoints=[],this.source=f,this.target=t}r.prototype=Object.create(u.prototype);for(var n in u)r[n]=u[n];r.prototype.getSource=function(){return this.source},r.prototype.getTarget=function(){return this.target},r.prototype.isInterGraph=function(){return this.isInterGraph},r.prototype.getLength=function(){return this.length},r.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},r.prototype.getBendpoints=function(){return this.bendpoints},r.prototype.getLca=function(){return this.lca},r.prototype.getSourceInLca=function(){return this.sourceInLca},r.prototype.getTargetInLca=function(){return this.targetInLca},r.prototype.getOtherEnd=function(f){if(this.source===f)return this.target;if(this.target===f)return this.source;throw"Node is not incident with this edge"},r.prototype.getOtherEndInGraph=function(f,t){for(var g=this.getOtherEnd(f),i=t.getGraphManager().getRoot();;){if(g.getOwner()==t)return g;if(g.getOwner()==i)break;g=g.getOwner().getParent()}return null},r.prototype.updateLength=function(){var f=new Array(4);this.isOverlapingSourceAndTarget=o.getIntersection(this.target.getRect(),this.source.getRect(),f),this.isOverlapingSourceAndTarget||(this.lengthX=f[0]-f[2],this.lengthY=f[1]-f[3],Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},r.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},C.exports=r}),(function(C,A,T){"use strict";function u(o){this.vGraphObject=o}C.exports=u}),(function(C,A,T){"use strict";var u=T(2),o=T(10),a=T(13),r=T(0),n=T(16),f=T(5);function t(i,e,h,c){h==null&&c==null&&(c=e),u.call(this,c),i.graphManager!=null&&(i=i.graphManager),this.estimatedSize=o.MIN_VALUE,this.inclusionTreeDepth=o.MAX_VALUE,this.vGraphObject=c,this.edges=[],this.graphManager=i,h!=null&&e!=null?this.rect=new a(e.x,e.y,h.width,h.height):this.rect=new a}t.prototype=Object.create(u.prototype);for(var g in u)t[g]=u[g];t.prototype.getEdges=function(){return this.edges},t.prototype.getChild=function(){return this.child},t.prototype.getOwner=function(){return this.owner},t.prototype.getWidth=function(){return this.rect.width},t.prototype.setWidth=function(i){this.rect.width=i},t.prototype.getHeight=function(){return this.rect.height},t.prototype.setHeight=function(i){this.rect.height=i},t.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},t.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},t.prototype.getCenter=function(){return new f(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},t.prototype.getLocation=function(){return new f(this.rect.x,this.rect.y)},t.prototype.getRect=function(){return this.rect},t.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},t.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},t.prototype.setRect=function(i,e){this.rect.x=i.x,this.rect.y=i.y,this.rect.width=e.width,this.rect.height=e.height},t.prototype.setCenter=function(i,e){this.rect.x=i-this.rect.width/2,this.rect.y=e-this.rect.height/2},t.prototype.setLocation=function(i,e){this.rect.x=i,this.rect.y=e},t.prototype.moveBy=function(i,e){this.rect.x+=i,this.rect.y+=e},t.prototype.getEdgeListToNode=function(i){var e=[],h,c=this;return c.edges.forEach(function(l){if(l.target==i){if(l.source!=c)throw"Incorrect edge source!";e.push(l)}}),e},t.prototype.getEdgesBetween=function(i){var e=[],h,c=this;return c.edges.forEach(function(l){if(!(l.source==c||l.target==c))throw"Incorrect edge source and/or target";(l.target==i||l.source==i)&&e.push(l)}),e},t.prototype.getNeighborsList=function(){var i=new Set,e=this;return e.edges.forEach(function(h){if(h.source==e)i.add(h.target);else{if(h.target!=e)throw"Incorrect incidency!";i.add(h.source)}}),i},t.prototype.withChildren=function(){var i=new Set,e,h;if(i.add(this),this.child!=null)for(var c=this.child.getNodes(),l=0;l<c.length;l++)e=c[l],h=e.withChildren(),h.forEach(function(N){i.add(N)});return i},t.prototype.getNoOfChildren=function(){var i=0,e;if(this.child==null)i=1;else for(var h=this.child.getNodes(),c=0;c<h.length;c++)e=h[c],i+=e.getNoOfChildren();return i==0&&(i=1),i},t.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},t.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},t.prototype.scatter=function(){var i,e,h=-r.INITIAL_WORLD_BOUNDARY,c=r.INITIAL_WORLD_BOUNDARY;i=r.WORLD_CENTER_X+n.nextDouble()*(c-h)+h;var l=-r.INITIAL_WORLD_BOUNDARY,N=r.INITIAL_WORLD_BOUNDARY;e=r.WORLD_CENTER_Y+n.nextDouble()*(N-l)+l,this.rect.x=i,this.rect.y=e},t.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var i=this.getChild();if(i.updateBounds(!0),this.rect.x=i.getLeft(),this.rect.y=i.getTop(),this.setWidth(i.getRight()-i.getLeft()),this.setHeight(i.getBottom()-i.getTop()),r.NODE_DIMENSIONS_INCLUDE_LABELS){var e=i.getRight()-i.getLeft(),h=i.getBottom()-i.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(e+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>e?(this.rect.x-=(this.labelWidth-e)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(e+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(h+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>h?(this.rect.y-=(this.labelHeight-h)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(h+this.labelHeight))}}},t.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==o.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},t.prototype.transform=function(i){var e=this.rect.x;e>r.WORLD_BOUNDARY?e=r.WORLD_BOUNDARY:e<-r.WORLD_BOUNDARY&&(e=-r.WORLD_BOUNDARY);var h=this.rect.y;h>r.WORLD_BOUNDARY?h=r.WORLD_BOUNDARY:h<-r.WORLD_BOUNDARY&&(h=-r.WORLD_BOUNDARY);var c=new f(e,h),l=i.inverseTransformPoint(c);this.setLocation(l.x,l.y)},t.prototype.getLeft=function(){return this.rect.x},t.prototype.getRight=function(){return this.rect.x+this.rect.width},t.prototype.getTop=function(){return this.rect.y},t.prototype.getBottom=function(){return this.rect.y+this.rect.height},t.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},C.exports=t}),(function(C,A,T){"use strict";var u=T(0);function o(){}for(var a in u)o[a]=u[a];o.MAX_ITERATIONS=2500,o.DEFAULT_EDGE_LENGTH=50,o.DEFAULT_SPRING_STRENGTH=.45,o.DEFAULT_REPULSION_STRENGTH=4500,o.DEFAULT_GRAVITY_STRENGTH=.4,o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,o.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,o.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,o.COOLING_ADAPTATION_FACTOR=.33,o.ADAPTATION_LOWER_NODE_LIMIT=1e3,o.ADAPTATION_UPPER_NODE_LIMIT=5e3,o.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,o.MAX_NODE_DISPLACEMENT=o.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,o.MIN_REPULSION_DIST=o.DEFAULT_EDGE_LENGTH/10,o.CONVERGENCE_CHECK_PERIOD=100,o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,o.MIN_EDGE_LENGTH=1,o.GRID_CALCULATION_CHECK_PERIOD=10,C.exports=o}),(function(C,A,T){"use strict";function u(o,a){o==null&&a==null?(this.x=0,this.y=0):(this.x=o,this.y=a)}u.prototype.getX=function(){return this.x},u.prototype.getY=function(){return this.y},u.prototype.setX=function(o){this.x=o},u.prototype.setY=function(o){this.y=o},u.prototype.getDifference=function(o){return new DimensionD(this.x-o.x,this.y-o.y)},u.prototype.getCopy=function(){return new u(this.x,this.y)},u.prototype.translate=function(o){return this.x+=o.width,this.y+=o.height,this},C.exports=u}),(function(C,A,T){"use strict";var u=T(2),o=T(10),a=T(0),r=T(7),n=T(3),f=T(1),t=T(13),g=T(12),i=T(11);function e(c,l,N){u.call(this,N),this.estimatedSize=o.MIN_VALUE,this.margin=a.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=c,l!=null&&l instanceof r?this.graphManager=l:l!=null&&l instanceof Layout&&(this.graphManager=l.graphManager)}e.prototype=Object.create(u.prototype);for(var h in u)e[h]=u[h];e.prototype.getNodes=function(){return this.nodes},e.prototype.getEdges=function(){return this.edges},e.prototype.getGraphManager=function(){return this.graphManager},e.prototype.getParent=function(){return this.parent},e.prototype.getLeft=function(){return this.left},e.prototype.getRight=function(){return this.right},e.prototype.getTop=function(){return this.top},e.prototype.getBottom=function(){return this.bottom},e.prototype.isConnected=function(){return this.isConnected},e.prototype.add=function(c,l,N){if(l==null&&N==null){var y=c;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(y)>-1)throw"Node already in graph!";return y.owner=this,this.getNodes().push(y),y}else{var p=c;if(!(this.getNodes().indexOf(l)>-1&&this.getNodes().indexOf(N)>-1))throw"Source or target not in graph!";if(!(l.owner==N.owner&&l.owner==this))throw"Both owners must be this graph!";return l.owner!=N.owner?null:(p.source=l,p.target=N,p.isInterGraph=!1,this.getEdges().push(p),l.edges.push(p),N!=l&&N.edges.push(p),p)}},e.prototype.remove=function(c){var l=c;if(c instanceof n){if(l==null)throw"Node is null!";if(!(l.owner!=null&&l.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var N=l.edges.slice(),y,p=N.length,L=0;L<p;L++)y=N[L],y.isInterGraph?this.graphManager.remove(y):y.source.owner.remove(y);var R=this.nodes.indexOf(l);if(R==-1)throw"Node not in owner node list!";this.nodes.splice(R,1)}else if(c instanceof f){var y=c;if(y==null)throw"Edge is null!";if(!(y.source!=null&&y.target!=null))throw"Source and/or target is null!";if(!(y.source.owner!=null&&y.target.owner!=null&&y.source.owner==this&&y.target.owner==this))throw"Source and/or target owner is invalid!";var M=y.source.edges.indexOf(y),S=y.target.edges.indexOf(y);if(!(M>-1&&S>-1))throw"Source and/or target doesn't know this edge!";y.source.edges.splice(M,1),y.target!=y.source&&y.target.edges.splice(S,1);var R=y.source.owner.getEdges().indexOf(y);if(R==-1)throw"Not in owner's edge list!";y.source.owner.getEdges().splice(R,1)}},e.prototype.updateLeftTop=function(){for(var c=o.MAX_VALUE,l=o.MAX_VALUE,N,y,p,L=this.getNodes(),R=L.length,M=0;M<R;M++){var S=L[M];N=S.getTop(),y=S.getLeft(),c>N&&(c=N),l>y&&(l=y)}return c==o.MAX_VALUE?null:(L[0].getParent().paddingLeft!=null?p=L[0].getParent().paddingLeft:p=this.margin,this.left=l-p,this.top=c-p,new g(this.left,this.top))},e.prototype.updateBounds=function(c){for(var l=o.MAX_VALUE,N=-o.MAX_VALUE,y=o.MAX_VALUE,p=-o.MAX_VALUE,L,R,M,S,B,Y=this.nodes,tt=Y.length,x=0;x<tt;x++){var k=Y[x];c&&k.child!=null&&k.updateBounds(),L=k.getLeft(),R=k.getRight(),M=k.getTop(),S=k.getBottom(),l>L&&(l=L),N<R&&(N=R),y>M&&(y=M),p<S&&(p=S)}var s=new t(l,y,N-l,p-y);l==o.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),Y[0].getParent().paddingLeft!=null?B=Y[0].getParent().paddingLeft:B=this.margin,this.left=s.x-B,this.right=s.x+s.width+B,this.top=s.y-B,this.bottom=s.y+s.height+B},e.calculateBounds=function(c){for(var l=o.MAX_VALUE,N=-o.MAX_VALUE,y=o.MAX_VALUE,p=-o.MAX_VALUE,L,R,M,S,B=c.length,Y=0;Y<B;Y++){var tt=c[Y];L=tt.getLeft(),R=tt.getRight(),M=tt.getTop(),S=tt.getBottom(),l>L&&(l=L),N<R&&(N=R),y>M&&(y=M),p<S&&(p=S)}var x=new t(l,y,N-l,p-y);return x},e.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},e.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},e.prototype.calcEstimatedSize=function(){for(var c=0,l=this.nodes,N=l.length,y=0;y<N;y++){var p=l[y];c+=p.calcEstimatedSize()}return c==0?this.estimatedSize=a.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=c/Math.sqrt(this.nodes.length),this.estimatedSize},e.prototype.updateConnected=function(){var c=this;if(this.nodes.length==0){this.isConnected=!0;return}var l=new i,N=new Set,y=this.nodes[0],p,L,R=y.withChildren();for(R.forEach(function(x){l.push(x),N.add(x)});l.length!==0;){y=l.shift(),p=y.getEdges();for(var M=p.length,S=0;S<M;S++){var B=p[S];if(L=B.getOtherEndInGraph(y,this),L!=null&&!N.has(L)){var Y=L.withChildren();Y.forEach(function(x){l.push(x),N.add(x)})}}}if(this.isConnected=!1,N.size>=this.nodes.length){var tt=0;N.forEach(function(x){x.owner==c&&tt++}),tt==this.nodes.length&&(this.isConnected=!0)}},C.exports=e}),(function(C,A,T){"use strict";var u,o=T(1);function a(r){u=T(6),this.layout=r,this.graphs=[],this.edges=[]}a.prototype.addRoot=function(){var r=this.layout.newGraph(),n=this.layout.newNode(null),f=this.add(r,n);return this.setRootGraph(f),this.rootGraph},a.prototype.add=function(r,n,f,t,g){if(f==null&&t==null&&g==null){if(r==null)throw"Graph is null!";if(n==null)throw"Parent node is null!";if(this.graphs.indexOf(r)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(r),r.parent!=null)throw"Already has a parent!";if(n.child!=null)throw"Already has a child!";return r.parent=n,n.child=r,r}else{g=f,t=n,f=r;var i=t.getOwner(),e=g.getOwner();if(!(i!=null&&i.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(e!=null&&e.getGraphManager()==this))throw"Target not in this graph mgr!";if(i==e)return f.isInterGraph=!1,i.add(f,t,g);if(f.isInterGraph=!0,f.source=t,f.target=g,this.edges.indexOf(f)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(f),!(f.source!=null&&f.target!=null))throw"Edge source and/or target is null!";if(!(f.source.edges.indexOf(f)==-1&&f.target.edges.indexOf(f)==-1))throw"Edge already in source and/or target incidency list!";return f.source.edges.push(f),f.target.edges.push(f),f}},a.prototype.remove=function(r){if(r instanceof u){var n=r;if(n.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(n==this.rootGraph||n.parent!=null&&n.parent.graphManager==this))throw"Invalid parent node!";var f=[];f=f.concat(n.getEdges());for(var t,g=f.length,i=0;i<g;i++)t=f[i],n.remove(t);var e=[];e=e.concat(n.getNodes());var h;g=e.length;for(var i=0;i<g;i++)h=e[i],n.remove(h);n==this.rootGraph&&this.setRootGraph(null);var c=this.graphs.indexOf(n);this.graphs.splice(c,1),n.parent=null}else if(r instanceof o){if(t=r,t==null)throw"Edge is null!";if(!t.isInterGraph)throw"Not an inter-graph edge!";if(!(t.source!=null&&t.target!=null))throw"Source and/or target is null!";if(!(t.source.edges.indexOf(t)!=-1&&t.target.edges.indexOf(t)!=-1))throw"Source and/or target doesn't know this edge!";var c=t.source.edges.indexOf(t);if(t.source.edges.splice(c,1),c=t.target.edges.indexOf(t),t.target.edges.splice(c,1),!(t.source.owner!=null&&t.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(t.source.owner.getGraphManager().edges.indexOf(t)==-1)throw"Not in owner graph manager's edge list!";var c=t.source.owner.getGraphManager().edges.indexOf(t);t.source.owner.getGraphManager().edges.splice(c,1)}},a.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},a.prototype.getGraphs=function(){return this.graphs},a.prototype.getAllNodes=function(){if(this.allNodes==null){for(var r=[],n=this.getGraphs(),f=n.length,t=0;t<f;t++)r=r.concat(n[t].getNodes());this.allNodes=r}return this.allNodes},a.prototype.resetAllNodes=function(){this.allNodes=null},a.prototype.resetAllEdges=function(){this.allEdges=null},a.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},a.prototype.getAllEdges=function(){if(this.allEdges==null){for(var r=[],n=this.getGraphs(),f=n.length,t=0;t<n.length;t++)r=r.concat(n[t].getEdges());r=r.concat(this.edges),this.allEdges=r}return this.allEdges},a.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},a.prototype.setAllNodesToApplyGravitation=function(r){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=r},a.prototype.getRoot=function(){return this.rootGraph},a.prototype.setRootGraph=function(r){if(r.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=r,r.parent==null&&(r.parent=this.layout.newNode("Root node"))},a.prototype.getLayout=function(){return this.layout},a.prototype.isOneAncestorOfOther=function(r,n){if(!(r!=null&&n!=null))throw"assert failed";if(r==n)return!0;var f=r.getOwner(),t;do{if(t=f.getParent(),t==null)break;if(t==n)return!0;if(f=t.getOwner(),f==null)break}while(!0);f=n.getOwner();do{if(t=f.getParent(),t==null)break;if(t==r)return!0;if(f=t.getOwner(),f==null)break}while(!0);return!1},a.prototype.calcLowestCommonAncestors=function(){for(var r,n,f,t,g,i=this.getAllEdges(),e=i.length,h=0;h<e;h++){if(r=i[h],n=r.source,f=r.target,r.lca=null,r.sourceInLca=n,r.targetInLca=f,n==f){r.lca=n.getOwner();continue}for(t=n.getOwner();r.lca==null;){for(r.targetInLca=f,g=f.getOwner();r.lca==null;){if(g==t){r.lca=g;break}if(g==this.rootGraph)break;if(r.lca!=null)throw"assert failed";r.targetInLca=g.getParent(),g=r.targetInLca.getOwner()}if(t==this.rootGraph)break;r.lca==null&&(r.sourceInLca=t.getParent(),t=r.sourceInLca.getOwner())}if(r.lca==null)throw"assert failed"}},a.prototype.calcLowestCommonAncestor=function(r,n){if(r==n)return r.getOwner();var f=r.getOwner();do{if(f==null)break;var t=n.getOwner();do{if(t==null)break;if(t==f)return t;t=t.getParent().getOwner()}while(!0);f=f.getParent().getOwner()}while(!0);return f},a.prototype.calcInclusionTreeDepths=function(r,n){r==null&&n==null&&(r=this.rootGraph,n=1);for(var f,t=r.getNodes(),g=t.length,i=0;i<g;i++)f=t[i],f.inclusionTreeDepth=n,f.child!=null&&this.calcInclusionTreeDepths(f.child,n+1)},a.prototype.includesInvalidEdge=function(){for(var r,n=[],f=this.edges.length,t=0;t<f;t++)r=this.edges[t],this.isOneAncestorOfOther(r.source,r.target)&&n.push(r);for(var t=0;t<n.length;t++)this.remove(n[t]);return!1},C.exports=a}),(function(C,A,T){"use strict";var u=T(12);function o(){}o.calcSeparationAmount=function(a,r,n,f){if(!a.intersects(r))throw"assert failed";var t=new Array(2);this.decideDirectionsForOverlappingNodes(a,r,t),n[0]=Math.min(a.getRight(),r.getRight())-Math.max(a.x,r.x),n[1]=Math.min(a.getBottom(),r.getBottom())-Math.max(a.y,r.y),a.getX()<=r.getX()&&a.getRight()>=r.getRight()?n[0]+=Math.min(r.getX()-a.getX(),a.getRight()-r.getRight()):r.getX()<=a.getX()&&r.getRight()>=a.getRight()&&(n[0]+=Math.min(a.getX()-r.getX(),r.getRight()-a.getRight())),a.getY()<=r.getY()&&a.getBottom()>=r.getBottom()?n[1]+=Math.min(r.getY()-a.getY(),a.getBottom()-r.getBottom()):r.getY()<=a.getY()&&r.getBottom()>=a.getBottom()&&(n[1]+=Math.min(a.getY()-r.getY(),r.getBottom()-a.getBottom()));var g=Math.abs((r.getCenterY()-a.getCenterY())/(r.getCenterX()-a.getCenterX()));r.getCenterY()===a.getCenterY()&&r.getCenterX()===a.getCenterX()&&(g=1);var i=g*n[0],e=n[1]/g;n[0]<e?e=n[0]:i=n[1],n[0]=-1*t[0]*(e/2+f),n[1]=-1*t[1]*(i/2+f)},o.decideDirectionsForOverlappingNodes=function(a,r,n){a.getCenterX()<r.getCenterX()?n[0]=-1:n[0]=1,a.getCenterY()<r.getCenterY()?n[1]=-1:n[1]=1},o.getIntersection2=function(a,r,n){var f=a.getCenterX(),t=a.getCenterY(),g=r.getCenterX(),i=r.getCenterY();if(a.intersects(r))return n[0]=f,n[1]=t,n[2]=g,n[3]=i,!0;var e=a.getX(),h=a.getY(),c=a.getRight(),l=a.getX(),N=a.getBottom(),y=a.getRight(),p=a.getWidthHalf(),L=a.getHeightHalf(),R=r.getX(),M=r.getY(),S=r.getRight(),B=r.getX(),Y=r.getBottom(),tt=r.getRight(),x=r.getWidthHalf(),k=r.getHeightHalf(),s=!1,E=!1;if(f===g){if(t>i)return n[0]=f,n[1]=h,n[2]=g,n[3]=Y,!1;if(t<i)return n[0]=f,n[1]=N,n[2]=g,n[3]=M,!1}else if(t===i){if(f>g)return n[0]=e,n[1]=t,n[2]=S,n[3]=i,!1;if(f<g)return n[0]=c,n[1]=t,n[2]=R,n[3]=i,!1}else{var v=a.height/a.width,m=r.height/r.width,d=(i-t)/(g-f),D=void 0,O=void 0,P=void 0,F=void 0,I=void 0,Z=void 0;if(-v===d?f>g?(n[0]=l,n[1]=N,s=!0):(n[0]=c,n[1]=h,s=!0):v===d&&(f>g?(n[0]=e,n[1]=h,s=!0):(n[0]=y,n[1]=N,s=!0)),-m===d?g>f?(n[2]=B,n[3]=Y,E=!0):(n[2]=S,n[3]=M,E=!0):m===d&&(g>f?(n[2]=R,n[3]=M,E=!0):(n[2]=tt,n[3]=Y,E=!0)),s&&E)return!1;if(f>g?t>i?(D=this.getCardinalDirection(v,d,4),O=this.getCardinalDirection(m,d,2)):(D=this.getCardinalDirection(-v,d,3),O=this.getCardinalDirection(-m,d,1)):t>i?(D=this.getCardinalDirection(-v,d,1),O=this.getCardinalDirection(-m,d,3)):(D=this.getCardinalDirection(v,d,2),O=this.getCardinalDirection(m,d,4)),!s)switch(D){case 1:F=h,P=f+-L/d,n[0]=P,n[1]=F;break;case 2:P=y,F=t+p*d,n[0]=P,n[1]=F;break;case 3:F=N,P=f+L/d,n[0]=P,n[1]=F;break;case 4:P=l,F=t+-p*d,n[0]=P,n[1]=F;break}if(!E)switch(O){case 1:Z=M,I=g+-k/d,n[2]=I,n[3]=Z;break;case 2:I=tt,Z=i+x*d,n[2]=I,n[3]=Z;break;case 3:Z=Y,I=g+k/d,n[2]=I,n[3]=Z;break;case 4:I=B,Z=i+-x*d,n[2]=I,n[3]=Z;break}}return!1},o.getCardinalDirection=function(a,r,n){return a>r?n:1+n%4},o.getIntersection=function(a,r,n,f){if(f==null)return this.getIntersection2(a,r,n);var t=a.x,g=a.y,i=r.x,e=r.y,h=n.x,c=n.y,l=f.x,N=f.y,y=void 0,p=void 0,L=void 0,R=void 0,M=void 0,S=void 0,B=void 0,Y=void 0,tt=void 0;return L=e-g,M=t-i,B=i*g-t*e,R=N-c,S=h-l,Y=l*c-h*N,tt=L*S-R*M,tt===0?null:(y=(M*Y-S*B)/tt,p=(R*B-L*Y)/tt,new u(y,p))},o.angleOfVector=function(a,r,n,f){var t=void 0;return a!==n?(t=Math.atan((f-r)/(n-a)),n<a?t+=Math.PI:f<r&&(t+=this.TWO_PI)):f<r?t=this.ONE_AND_HALF_PI:t=this.HALF_PI,t},o.doIntersect=function(a,r,n,f){var t=a.x,g=a.y,i=r.x,e=r.y,h=n.x,c=n.y,l=f.x,N=f.y,y=(i-t)*(N-c)-(l-h)*(e-g);if(y===0)return!1;var p=((N-c)*(l-t)+(h-l)*(N-g))/y,L=((g-e)*(l-t)+(i-t)*(N-g))/y;return 0<p&&p<1&&0<L&&L<1},o.findCircleLineIntersections=function(a,r,n,f,t,g,i){var e=(n-a)*(n-a)+(f-r)*(f-r),h=2*((a-t)*(n-a)+(r-g)*(f-r)),c=(a-t)*(a-t)+(r-g)*(r-g)-i*i,l=h*h-4*e*c;if(l>=0){var N=(-h+Math.sqrt(h*h-4*e*c))/(2*e),y=(-h-Math.sqrt(h*h-4*e*c))/(2*e),p=null;return N>=0&&N<=1?[N]:y>=0&&y<=1?[y]:p}else return null},o.HALF_PI=.5*Math.PI,o.ONE_AND_HALF_PI=1.5*Math.PI,o.TWO_PI=2*Math.PI,o.THREE_PI=3*Math.PI,C.exports=o}),(function(C,A,T){"use strict";function u(){}u.sign=function(o){return o>0?1:o<0?-1:0},u.floor=function(o){return o<0?Math.ceil(o):Math.floor(o)},u.ceil=function(o){return o<0?Math.floor(o):Math.ceil(o)},C.exports=u}),(function(C,A,T){"use strict";function u(){}u.MAX_VALUE=2147483647,u.MIN_VALUE=-2147483648,C.exports=u}),(function(C,A,T){"use strict";var u=(function(){function t(g,i){for(var e=0;e<i.length;e++){var h=i[e];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(g,h.key,h)}}return function(g,i,e){return i&&t(g.prototype,i),e&&t(g,e),g}})();function o(t,g){if(!(t instanceof g))throw new TypeError("Cannot call a class as a function")}var a=function(g){return{value:g,next:null,prev:null}},r=function(g,i,e,h){return g!==null?g.next=i:h.head=i,e!==null?e.prev=i:h.tail=i,i.prev=g,i.next=e,h.length++,i},n=function(g,i){var e=g.prev,h=g.next;return e!==null?e.next=h:i.head=h,h!==null?h.prev=e:i.tail=e,g.prev=g.next=null,i.length--,g},f=(function(){function t(g){var i=this;o(this,t),this.length=0,this.head=null,this.tail=null,g?.forEach(function(e){return i.push(e)})}return u(t,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(i,e){return r(e.prev,a(i),e,this)}},{key:"insertAfter",value:function(i,e){return r(e,a(i),e.next,this)}},{key:"insertNodeBefore",value:function(i,e){return r(e.prev,i,e,this)}},{key:"insertNodeAfter",value:function(i,e){return r(e,i,e.next,this)}},{key:"push",value:function(i){return r(this.tail,a(i),null,this)}},{key:"unshift",value:function(i){return r(null,a(i),this.head,this)}},{key:"remove",value:function(i){return n(i,this)}},{key:"pop",value:function(){return n(this.tail,this).value}},{key:"popNode",value:function(){return n(this.tail,this)}},{key:"shift",value:function(){return n(this.head,this).value}},{key:"shiftNode",value:function(){return n(this.head,this)}},{key:"get_object_at",value:function(i){if(i<=this.length()){for(var e=1,h=this.head;e<i;)h=h.next,e++;return h.value}}},{key:"set_object_at",value:function(i,e){if(i<=this.length()){for(var h=1,c=this.head;h<i;)c=c.next,h++;c.value=e}}}]),t})();C.exports=f}),(function(C,A,T){"use strict";function u(o,a,r){this.x=null,this.y=null,o==null&&a==null&&r==null?(this.x=0,this.y=0):typeof o=="number"&&typeof a=="number"&&r==null?(this.x=o,this.y=a):o.constructor.name=="Point"&&a==null&&r==null&&(r=o,this.x=r.x,this.y=r.y)}u.prototype.getX=function(){return this.x},u.prototype.getY=function(){return this.y},u.prototype.getLocation=function(){return new u(this.x,this.y)},u.prototype.setLocation=function(o,a,r){o.constructor.name=="Point"&&a==null&&r==null?(r=o,this.setLocation(r.x,r.y)):typeof o=="number"&&typeof a=="number"&&r==null&&(parseInt(o)==o&&parseInt(a)==a?this.move(o,a):(this.x=Math.floor(o+.5),this.y=Math.floor(a+.5)))},u.prototype.move=function(o,a){this.x=o,this.y=a},u.prototype.translate=function(o,a){this.x+=o,this.y+=a},u.prototype.equals=function(o){if(o.constructor.name=="Point"){var a=o;return this.x==a.x&&this.y==a.y}return this==o},u.prototype.toString=function(){return new u().constructor.name+"[x="+this.x+",y="+this.y+"]"},C.exports=u}),(function(C,A,T){"use strict";function u(o,a,r,n){this.x=0,this.y=0,this.width=0,this.height=0,o!=null&&a!=null&&r!=null&&n!=null&&(this.x=o,this.y=a,this.width=r,this.height=n)}u.prototype.getX=function(){return this.x},u.prototype.setX=function(o){this.x=o},u.prototype.getY=function(){return this.y},u.prototype.setY=function(o){this.y=o},u.prototype.getWidth=function(){return this.width},u.prototype.setWidth=function(o){this.width=o},u.prototype.getHeight=function(){return this.height},u.prototype.setHeight=function(o){this.height=o},u.prototype.getRight=function(){return this.x+this.width},u.prototype.getBottom=function(){return this.y+this.height},u.prototype.intersects=function(o){return!(this.getRight()<o.x||this.getBottom()<o.y||o.getRight()<this.x||o.getBottom()<this.y)},u.prototype.getCenterX=function(){return this.x+this.width/2},u.prototype.getMinX=function(){return this.getX()},u.prototype.getMaxX=function(){return this.getX()+this.width},u.prototype.getCenterY=function(){return this.y+this.height/2},u.prototype.getMinY=function(){return this.getY()},u.prototype.getMaxY=function(){return this.getY()+this.height},u.prototype.getWidthHalf=function(){return this.width/2},u.prototype.getHeightHalf=function(){return this.height/2},C.exports=u}),(function(C,A,T){"use strict";var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function o(){}o.lastID=0,o.createID=function(a){return o.isPrimitive(a)?a:(a.uniqueID!=null||(a.uniqueID=o.getString(),o.lastID++),a.uniqueID)},o.getString=function(a){return a==null&&(a=o.lastID),"Object#"+a},o.isPrimitive=function(a){var r=typeof a>"u"?"undefined":u(a);return a==null||r!="object"&&r!="function"},C.exports=o}),(function(C,A,T){"use strict";function u(h){if(Array.isArray(h)){for(var c=0,l=Array(h.length);c<h.length;c++)l[c]=h[c];return l}else return Array.from(h)}var o=T(0),a=T(7),r=T(3),n=T(1),f=T(6),t=T(5),g=T(17),i=T(29);function e(h){i.call(this),this.layoutQuality=o.QUALITY,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=o.DEFAULT_INCREMENTAL,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new a(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,h!=null&&(this.isRemoteUse=h)}e.RANDOM_SEED=1,e.prototype=Object.create(i.prototype),e.prototype.getGraphManager=function(){return this.graphManager},e.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},e.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},e.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},e.prototype.newGraphManager=function(){var h=new a(this);return this.graphManager=h,h},e.prototype.newGraph=function(h){return new f(null,this.graphManager,h)},e.prototype.newNode=function(h){return new r(this.graphManager,h)},e.prototype.newEdge=function(h){return new n(null,null,h)},e.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},e.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var h;return this.checkLayoutSuccess()?h=!1:h=this.layout(),o.ANIMATE==="during"?!1:(h&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,h)},e.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},e.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var h,c=this.graphManager.getAllEdges(),l=0;l<c.length;l++)h=c[l];for(var N,y=this.graphManager.getRoot().getNodes(),l=0;l<y.length;l++)N=y[l];this.update(this.graphManager.getRoot())}},e.prototype.update=function(h){if(h==null)this.update2();else if(h instanceof r){var c=h;if(c.getChild()!=null)for(var l=c.getChild().getNodes(),N=0;N<l.length;N++)update(l[N]);if(c.vGraphObject!=null){var y=c.vGraphObject;y.update(c)}}else if(h instanceof n){var p=h;if(p.vGraphObject!=null){var L=p.vGraphObject;L.update(p)}}else if(h instanceof f){var R=h;if(R.vGraphObject!=null){var M=R.vGraphObject;M.update(R)}}},e.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=o.QUALITY,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=o.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},e.prototype.transform=function(h){if(h==null)this.transform(new t(0,0));else{var c=new g,l=this.graphManager.getRoot().updateLeftTop();if(l!=null){c.setWorldOrgX(h.x),c.setWorldOrgY(h.y),c.setDeviceOrgX(l.x),c.setDeviceOrgY(l.y);for(var N=this.getAllNodes(),y,p=0;p<N.length;p++)y=N[p],y.transform(c)}}},e.prototype.positionNodesRandomly=function(h){if(h==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var c,l,N=h.getNodes(),y=0;y<N.length;y++)c=N[y],l=c.getChild(),l==null||l.getNodes().length==0?c.scatter():(this.positionNodesRandomly(l),c.updateBounds())},e.prototype.getFlatForest=function(){for(var h=[],c=!0,l=this.graphManager.getRoot().getNodes(),N=!0,y=0;y<l.length;y++)l[y].getChild()!=null&&(N=!1);if(!N)return h;var p=new Set,L=[],R=new Map,M=[];for(M=M.concat(l);M.length>0&&c;){for(L.push(M[0]);L.length>0&&c;){var S=L[0];L.splice(0,1),p.add(S);for(var B=S.getEdges(),y=0;y<B.length;y++){var Y=B[y].getOtherEnd(S);if(R.get(S)!=Y)if(!p.has(Y))L.push(Y),R.set(Y,S);else{c=!1;break}}}if(!c)h=[];else{var tt=[].concat(u(p));h.push(tt);for(var y=0;y<tt.length;y++){var x=tt[y],k=M.indexOf(x);k>-1&&M.splice(k,1)}p=new Set,R=new Map}}return h},e.prototype.createDummyNodesForBendpoints=function(h){for(var c=[],l=h.source,N=this.graphManager.calcLowestCommonAncestor(h.source,h.target),y=0;y<h.bendpoints.length;y++){var p=this.newNode(null);p.setRect(new Point(0,0),new Dimension(1,1)),N.add(p);var L=this.newEdge(null);this.graphManager.add(L,l,p),c.add(p),l=p}var L=this.newEdge(null);return this.graphManager.add(L,l,h.target),this.edgeToDummyNodes.set(h,c),h.isInterGraph()?this.graphManager.remove(h):N.remove(h),c},e.prototype.createBendpointsFromDummyNodes=function(){var h=[];h=h.concat(this.graphManager.getAllEdges()),h=[].concat(u(this.edgeToDummyNodes.keys())).concat(h);for(var c=0;c<h.length;c++){var l=h[c];if(l.bendpoints.length>0){for(var N=this.edgeToDummyNodes.get(l),y=0;y<N.length;y++){var p=N[y],L=new t(p.getCenterX(),p.getCenterY()),R=l.bendpoints.get(y);R.x=L.x,R.y=L.y,p.getOwner().remove(p)}this.graphManager.add(l,l.source,l.target)}}},e.transform=function(h,c,l,N){if(l!=null&&N!=null){var y=c;if(h<=50){var p=c/l;y-=(c-p)/50*(50-h)}else{var L=c*N;y+=(L-c)/50*(h-50)}return y}else{var R,M;return h<=50?(R=9*c/500,M=c/10):(R=9*c/50,M=-8*c),R*h+M}},e.findCenterOfTree=function(h){var c=[];c=c.concat(h);var l=[],N=new Map,y=!1,p=null;(c.length==1||c.length==2)&&(y=!0,p=c[0]);for(var L=0;L<c.length;L++){var R=c[L],M=R.getNeighborsList().size;N.set(R,R.getNeighborsList().size),M==1&&l.push(R)}var S=[];for(S=S.concat(l);!y;){var B=[];B=B.concat(S),S=[];for(var L=0;L<c.length;L++){var R=c[L],Y=c.indexOf(R);Y>=0&&c.splice(Y,1);var tt=R.getNeighborsList();tt.forEach(function(s){if(l.indexOf(s)<0){var E=N.get(s),v=E-1;v==1&&S.push(s),N.set(s,v)}})}l=l.concat(S),(c.length==1||c.length==2)&&(y=!0,p=c[0])}return p},e.prototype.setGraphManager=function(h){this.graphManager=h},C.exports=e}),(function(C,A,T){"use strict";function u(){}u.seed=1,u.x=0,u.nextDouble=function(){return u.x=Math.sin(u.seed++)*1e4,u.x-Math.floor(u.x)},C.exports=u}),(function(C,A,T){"use strict";var u=T(5);function o(a,r){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}o.prototype.getWorldOrgX=function(){return this.lworldOrgX},o.prototype.setWorldOrgX=function(a){this.lworldOrgX=a},o.prototype.getWorldOrgY=function(){return this.lworldOrgY},o.prototype.setWorldOrgY=function(a){this.lworldOrgY=a},o.prototype.getWorldExtX=function(){return this.lworldExtX},o.prototype.setWorldExtX=function(a){this.lworldExtX=a},o.prototype.getWorldExtY=function(){return this.lworldExtY},o.prototype.setWorldExtY=function(a){this.lworldExtY=a},o.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},o.prototype.setDeviceOrgX=function(a){this.ldeviceOrgX=a},o.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},o.prototype.setDeviceOrgY=function(a){this.ldeviceOrgY=a},o.prototype.getDeviceExtX=function(){return this.ldeviceExtX},o.prototype.setDeviceExtX=function(a){this.ldeviceExtX=a},o.prototype.getDeviceExtY=function(){return this.ldeviceExtY},o.prototype.setDeviceExtY=function(a){this.ldeviceExtY=a},o.prototype.transformX=function(a){var r=0,n=this.lworldExtX;return n!=0&&(r=this.ldeviceOrgX+(a-this.lworldOrgX)*this.ldeviceExtX/n),r},o.prototype.transformY=function(a){var r=0,n=this.lworldExtY;return n!=0&&(r=this.ldeviceOrgY+(a-this.lworldOrgY)*this.ldeviceExtY/n),r},o.prototype.inverseTransformX=function(a){var r=0,n=this.ldeviceExtX;return n!=0&&(r=this.lworldOrgX+(a-this.ldeviceOrgX)*this.lworldExtX/n),r},o.prototype.inverseTransformY=function(a){var r=0,n=this.ldeviceExtY;return n!=0&&(r=this.lworldOrgY+(a-this.ldeviceOrgY)*this.lworldExtY/n),r},o.prototype.inverseTransformPoint=function(a){var r=new u(this.inverseTransformX(a.x),this.inverseTransformY(a.y));return r},C.exports=o}),(function(C,A,T){"use strict";function u(i){if(Array.isArray(i)){for(var e=0,h=Array(i.length);e<i.length;e++)h[e]=i[e];return h}else return Array.from(i)}var o=T(15),a=T(4),r=T(0),n=T(8),f=T(9);function t(){o.call(this),this.useSmartIdealEdgeLengthCalculation=a.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=a.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=a.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=a.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*a.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=a.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=a.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=a.MAX_ITERATIONS}t.prototype=Object.create(o.prototype);for(var g in o)t[g]=o[g];t.prototype.initParameters=function(){o.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=a.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},t.prototype.calcIdealEdgeLengths=function(){for(var i,e,h,c,l,N,y,p=this.getGraphManager().getAllEdges(),L=0;L<p.length;L++)i=p[L],e=i.idealLength,i.isInterGraph&&(c=i.getSource(),l=i.getTarget(),N=i.getSourceInLca().getEstimatedSize(),y=i.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(i.idealLength+=N+y-2*r.SIMPLE_NODE_SIZE),h=i.getLca().getInclusionTreeDepth(),i.idealLength+=e*a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(c.getInclusionTreeDepth()+l.getInclusionTreeDepth()-2*h))},t.prototype.initSpringEmbedder=function(){var i=this.getAllNodes().length;this.incremental?(i>a.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*a.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(i-a.ADAPTATION_LOWER_NODE_LIMIT)/(a.ADAPTATION_UPPER_NODE_LIMIT-a.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-a.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=a.MAX_NODE_DISPLACEMENT_INCREMENTAL):(i>a.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(a.COOLING_ADAPTATION_FACTOR,1-(i-a.ADAPTATION_LOWER_NODE_LIMIT)/(a.ADAPTATION_UPPER_NODE_LIMIT-a.ADAPTATION_LOWER_NODE_LIMIT)*(1-a.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=a.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*a.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},t.prototype.calcSpringForces=function(){for(var i=this.getAllEdges(),e,h=0;h<i.length;h++)e=i[h],this.calcSpringForce(e,e.idealLength)},t.prototype.calcRepulsionForces=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,h,c,l,N,y=this.getAllNodes(),p;if(this.useFRGridVariant)for(this.totalIterations%a.GRID_CALCULATION_CHECK_PERIOD==1&&i&&this.updateGrid(),p=new Set,h=0;h<y.length;h++)l=y[h],this.calculateRepulsionForceOfANode(l,p,i,e),p.add(l);else for(h=0;h<y.length;h++)for(l=y[h],c=h+1;c<y.length;c++)N=y[c],l.getOwner()==N.getOwner()&&this.calcRepulsionForce(l,N)},t.prototype.calcGravitationalForces=function(){for(var i,e=this.getAllNodesToApplyGravitation(),h=0;h<e.length;h++)i=e[h],this.calcGravitationalForce(i)},t.prototype.moveNodes=function(){for(var i=this.getAllNodes(),e,h=0;h<i.length;h++)e=i[h],e.move()},t.prototype.calcSpringForce=function(i,e){var h=i.getSource(),c=i.getTarget(),l,N,y,p;if(this.uniformLeafNodeSizes&&h.getChild()==null&&c.getChild()==null)i.updateLengthSimple();else if(i.updateLength(),i.isOverlapingSourceAndTarget)return;l=i.getLength(),l!=0&&(N=i.edgeElasticity*(l-e),y=N*(i.lengthX/l),p=N*(i.lengthY/l),h.springForceX+=y,h.springForceY+=p,c.springForceX-=y,c.springForceY-=p)},t.prototype.calcRepulsionForce=function(i,e){var h=i.getRect(),c=e.getRect(),l=new Array(2),N=new Array(4),y,p,L,R,M,S,B;if(h.intersects(c)){n.calcSeparationAmount(h,c,l,a.DEFAULT_EDGE_LENGTH/2),S=2*l[0],B=2*l[1];var Y=i.noOfChildren*e.noOfChildren/(i.noOfChildren+e.noOfChildren);i.repulsionForceX-=Y*S,i.repulsionForceY-=Y*B,e.repulsionForceX+=Y*S,e.repulsionForceY+=Y*B}else this.uniformLeafNodeSizes&&i.getChild()==null&&e.getChild()==null?(y=c.getCenterX()-h.getCenterX(),p=c.getCenterY()-h.getCenterY()):(n.getIntersection(h,c,N),y=N[2]-N[0],p=N[3]-N[1]),Math.abs(y)<a.MIN_REPULSION_DIST&&(y=f.sign(y)*a.MIN_REPULSION_DIST),Math.abs(p)<a.MIN_REPULSION_DIST&&(p=f.sign(p)*a.MIN_REPULSION_DIST),L=y*y+p*p,R=Math.sqrt(L),M=(i.nodeRepulsion/2+e.nodeRepulsion/2)*i.noOfChildren*e.noOfChildren/L,S=M*y/R,B=M*p/R,i.repulsionForceX-=S,i.repulsionForceY-=B,e.repulsionForceX+=S,e.repulsionForceY+=B},t.prototype.calcGravitationalForce=function(i){var e,h,c,l,N,y,p,L;e=i.getOwner(),h=(e.getRight()+e.getLeft())/2,c=(e.getTop()+e.getBottom())/2,l=i.getCenterX()-h,N=i.getCenterY()-c,y=Math.abs(l)+i.getWidth()/2,p=Math.abs(N)+i.getHeight()/2,i.getOwner()==this.graphManager.getRoot()?(L=e.getEstimatedSize()*this.gravityRangeFactor,(y>L||p>L)&&(i.gravitationForceX=-this.gravityConstant*l,i.gravitationForceY=-this.gravityConstant*N)):(L=e.getEstimatedSize()*this.compoundGravityRangeFactor,(y>L||p>L)&&(i.gravitationForceX=-this.gravityConstant*l*this.compoundGravityConstant,i.gravitationForceY=-this.gravityConstant*N*this.compoundGravityConstant))},t.prototype.isConverged=function(){var i,e=!1;return this.totalIterations>this.maxIterations/3&&(e=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),i=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,i||e},t.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},t.prototype.calcNoOfChildrenForAllNodes=function(){for(var i,e=this.graphManager.getAllNodes(),h=0;h<e.length;h++)i=e[h],i.noOfChildren=i.getNoOfChildren()},t.prototype.calcGrid=function(i){var e=0,h=0;e=parseInt(Math.ceil((i.getRight()-i.getLeft())/this.repulsionRange)),h=parseInt(Math.ceil((i.getBottom()-i.getTop())/this.repulsionRange));for(var c=new Array(e),l=0;l<e;l++)c[l]=new Array(h);for(var l=0;l<e;l++)for(var N=0;N<h;N++)c[l][N]=new Array;return c},t.prototype.addNodeToGrid=function(i,e,h){var c=0,l=0,N=0,y=0;c=parseInt(Math.floor((i.getRect().x-e)/this.repulsionRange)),l=parseInt(Math.floor((i.getRect().width+i.getRect().x-e)/this.repulsionRange)),N=parseInt(Math.floor((i.getRect().y-h)/this.repulsionRange)),y=parseInt(Math.floor((i.getRect().height+i.getRect().y-h)/this.repulsionRange));for(var p=c;p<=l;p++)for(var L=N;L<=y;L++)this.grid[p][L].push(i),i.setGridCoordinates(c,l,N,y)},t.prototype.updateGrid=function(){var i,e,h=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),i=0;i<h.length;i++)e=h[i],this.addNodeToGrid(e,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},t.prototype.calculateRepulsionForceOfANode=function(i,e,h,c){if(this.totalIterations%a.GRID_CALCULATION_CHECK_PERIOD==1&&h||c){var l=new Set;i.surrounding=new Array;for(var N,y=this.grid,p=i.startX-1;p<i.finishX+2;p++)for(var L=i.startY-1;L<i.finishY+2;L++)if(!(p<0||L<0||p>=y.length||L>=y[0].length)){for(var R=0;R<y[p][L].length;R++)if(N=y[p][L][R],!(i.getOwner()!=N.getOwner()||i==N)&&!e.has(N)&&!l.has(N)){var M=Math.abs(i.getCenterX()-N.getCenterX())-(i.getWidth()/2+N.getWidth()/2),S=Math.abs(i.getCenterY()-N.getCenterY())-(i.getHeight()/2+N.getHeight()/2);M<=this.repulsionRange&&S<=this.repulsionRange&&l.add(N)}}i.surrounding=[].concat(u(l))}for(p=0;p<i.surrounding.length;p++)this.calcRepulsionForce(i,i.surrounding[p])},t.prototype.calcRepulsionRange=function(){return 0},C.exports=t}),(function(C,A,T){"use strict";var u=T(1),o=T(4);function a(n,f,t){u.call(this,n,f,t),this.idealLength=o.DEFAULT_EDGE_LENGTH,this.edgeElasticity=o.DEFAULT_SPRING_STRENGTH}a.prototype=Object.create(u.prototype);for(var r in u)a[r]=u[r];C.exports=a}),(function(C,A,T){"use strict";var u=T(3),o=T(4);function a(n,f,t,g){u.call(this,n,f,t,g),this.nodeRepulsion=o.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}a.prototype=Object.create(u.prototype);for(var r in u)a[r]=u[r];a.prototype.setGridCoordinates=function(n,f,t,g){this.startX=n,this.finishX=f,this.startY=t,this.finishY=g},C.exports=a}),(function(C,A,T){"use strict";function u(o,a){this.width=0,this.height=0,o!==null&&a!==null&&(this.height=a,this.width=o)}u.prototype.getWidth=function(){return this.width},u.prototype.setWidth=function(o){this.width=o},u.prototype.getHeight=function(){return this.height},u.prototype.setHeight=function(o){this.height=o},C.exports=u}),(function(C,A,T){"use strict";var u=T(14);function o(){this.map={},this.keys=[]}o.prototype.put=function(a,r){var n=u.createID(a);this.contains(n)||(this.map[n]=r,this.keys.push(a))},o.prototype.contains=function(a){var r=u.createID(a);return this.map[a]!=null},o.prototype.get=function(a){var r=u.createID(a);return this.map[r]},o.prototype.keySet=function(){return this.keys},C.exports=o}),(function(C,A,T){"use strict";var u=T(14);function o(){this.set={}}o.prototype.add=function(a){var r=u.createID(a);this.contains(r)||(this.set[r]=a)},o.prototype.remove=function(a){delete this.set[u.createID(a)]},o.prototype.clear=function(){this.set={}},o.prototype.contains=function(a){return this.set[u.createID(a)]==a},o.prototype.isEmpty=function(){return this.size()===0},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAllTo=function(a){for(var r=Object.keys(this.set),n=r.length,f=0;f<n;f++)a.push(this.set[r[f]])},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAll=function(a){for(var r=a.length,n=0;n<r;n++){var f=a[n];this.add(f)}},C.exports=o}),(function(C,A,T){"use strict";function u(){}u.multMat=function(o,a){for(var r=[],n=0;n<o.length;n++){r[n]=[];for(var f=0;f<a[0].length;f++){r[n][f]=0;for(var t=0;t<o[0].length;t++)r[n][f]+=o[n][t]*a[t][f]}}return r},u.transpose=function(o){for(var a=[],r=0;r<o[0].length;r++){a[r]=[];for(var n=0;n<o.length;n++)a[r][n]=o[n][r]}return a},u.multCons=function(o,a){for(var r=[],n=0;n<o.length;n++)r[n]=o[n]*a;return r},u.minusOp=function(o,a){for(var r=[],n=0;n<o.length;n++)r[n]=o[n]-a[n];return r},u.dotProduct=function(o,a){for(var r=0,n=0;n<o.length;n++)r+=o[n]*a[n];return r},u.mag=function(o){return Math.sqrt(this.dotProduct(o,o))},u.normalize=function(o){for(var a=[],r=this.mag(o),n=0;n<o.length;n++)a[n]=o[n]/r;return a},u.multGamma=function(o){for(var a=[],r=0,n=0;n<o.length;n++)r+=o[n];r*=-1/o.length;for(var f=0;f<o.length;f++)a[f]=r+o[f];return a},u.multL=function(o,a,r){for(var n=[],f=[],t=[],g=0;g<a[0].length;g++){for(var i=0,e=0;e<a.length;e++)i+=-.5*a[e][g]*o[e];f[g]=i}for(var h=0;h<r.length;h++){for(var c=0,l=0;l<r.length;l++)c+=r[h][l]*f[l];t[h]=c}for(var N=0;N<a.length;N++){for(var y=0,p=0;p<a[0].length;p++)y+=a[N][p]*t[p];n[N]=y}return n},C.exports=u}),(function(C,A,T){"use strict";var u=(function(){function n(f,t){for(var g=0;g<t.length;g++){var i=t[g];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(f,i.key,i)}}return function(f,t,g){return t&&n(f.prototype,t),g&&n(f,g),f}})();function o(n,f){if(!(n instanceof f))throw new TypeError("Cannot call a class as a function")}var a=T(11),r=(function(){function n(f,t){o(this,n),(t!==null||t!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var g=void 0;f instanceof a?g=f.size():g=f.length,this._quicksort(f,0,g-1)}return u(n,[{key:"_quicksort",value:function(t,g,i){if(g<i){var e=this._partition(t,g,i);this._quicksort(t,g,e),this._quicksort(t,e+1,i)}}},{key:"_partition",value:function(t,g,i){for(var e=this._get(t,g),h=g,c=i;;){for(;this.compareFunction(e,this._get(t,c));)c--;for(;this.compareFunction(this._get(t,h),e);)h++;if(h<c)this._swap(t,h,c),h++,c--;else return c}}},{key:"_get",value:function(t,g){return t instanceof a?t.get_object_at(g):t[g]}},{key:"_set",value:function(t,g,i){t instanceof a?t.set_object_at(g,i):t[g]=i}},{key:"_swap",value:function(t,g,i){var e=this._get(t,g);this._set(t,g,this._get(t,i)),this._set(t,i,e)}},{key:"_defaultCompareFunction",value:function(t,g){return g>t}}]),n})();C.exports=r}),(function(C,A,T){"use strict";function u(){}u.svd=function(o){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=o.length,this.n=o[0].length;var a=Math.min(this.m,this.n);this.s=(function(Dt){for(var Nt=[];Dt-- >0;)Nt.push(0);return Nt})(Math.min(this.m+1,this.n)),this.U=(function(Dt){var Nt=function $t(Rt){if(Rt.length==0)return 0;for(var Xt=[],zt=0;zt<Rt[0];zt++)Xt.push($t(Rt.slice(1)));return Xt};return Nt(Dt)})([this.m,a]),this.V=(function(Dt){var Nt=function $t(Rt){if(Rt.length==0)return 0;for(var Xt=[],zt=0;zt<Rt[0];zt++)Xt.push($t(Rt.slice(1)));return Xt};return Nt(Dt)})([this.n,this.n]);for(var r=(function(Dt){for(var Nt=[];Dt-- >0;)Nt.push(0);return Nt})(this.n),n=(function(Dt){for(var Nt=[];Dt-- >0;)Nt.push(0);return Nt})(this.m),f=!0,t=!0,g=Math.min(this.m-1,this.n),i=Math.max(0,Math.min(this.n-2,this.m)),e=0;e<Math.max(g,i);e++){if(e<g){this.s[e]=0;for(var h=e;h<this.m;h++)this.s[e]=u.hypot(this.s[e],o[h][e]);if(this.s[e]!==0){o[e][e]<0&&(this.s[e]=-this.s[e]);for(var c=e;c<this.m;c++)o[c][e]/=this.s[e];o[e][e]+=1}this.s[e]=-this.s[e]}for(var l=e+1;l<this.n;l++){if((function(Dt,Nt){return Dt&&Nt})(e<g,this.s[e]!==0)){for(var N=0,y=e;y<this.m;y++)N+=o[y][e]*o[y][l];N=-N/o[e][e];for(var p=e;p<this.m;p++)o[p][l]+=N*o[p][e]}r[l]=o[e][l]}if((function(Dt,Nt){return Dt&&Nt})(f,e<g))for(var L=e;L<this.m;L++)this.U[L][e]=o[L][e];if(e<i){r[e]=0;for(var R=e+1;R<this.n;R++)r[e]=u.hypot(r[e],r[R]);if(r[e]!==0){r[e+1]<0&&(r[e]=-r[e]);for(var M=e+1;M<this.n;M++)r[M]/=r[e];r[e+1]+=1}if(r[e]=-r[e],(function(Dt,Nt){return Dt&&Nt})(e+1<this.m,r[e]!==0)){for(var S=e+1;S<this.m;S++)n[S]=0;for(var B=e+1;B<this.n;B++)for(var Y=e+1;Y<this.m;Y++)n[Y]+=r[B]*o[Y][B];for(var tt=e+1;tt<this.n;tt++)for(var x=-r[tt]/r[e+1],k=e+1;k<this.m;k++)o[k][tt]+=x*n[k]}if(t)for(var s=e+1;s<this.n;s++)this.V[s][e]=r[s]}}var E=Math.min(this.n,this.m+1);if(g<this.n&&(this.s[g]=o[g][g]),this.m<E&&(this.s[E-1]=0),i+1<E&&(r[i]=o[i][E-1]),r[E-1]=0,f){for(var v=g;v<a;v++){for(var m=0;m<this.m;m++)this.U[m][v]=0;this.U[v][v]=1}for(var d=g-1;d>=0;d--)if(this.s[d]!==0){for(var D=d+1;D<a;D++){for(var O=0,P=d;P<this.m;P++)O+=this.U[P][d]*this.U[P][D];O=-O/this.U[d][d];for(var F=d;F<this.m;F++)this.U[F][D]+=O*this.U[F][d]}for(var I=d;I<this.m;I++)this.U[I][d]=-this.U[I][d];this.U[d][d]=1+this.U[d][d];for(var Z=0;Z<d-1;Z++)this.U[Z][d]=0}else{for(var _=0;_<this.m;_++)this.U[_][d]=0;this.U[d][d]=1}}if(t)for(var b=this.n-1;b>=0;b--){if((function(Dt,Nt){return Dt&&Nt})(b<i,r[b]!==0))for(var j=b+1;j<a;j++){for(var V=0,w=b+1;w<this.n;w++)V+=this.V[w][b]*this.V[w][j];V=-V/this.V[b+1][b];for(var U=b+1;U<this.n;U++)this.V[U][j]+=V*this.V[U][b]}for(var X=0;X<this.n;X++)this.V[X][b]=0;this.V[b][b]=1}for(var J=E-1,st=0,Lt=Math.pow(2,-52),St=Math.pow(2,-966);E>0;){var Q=void 0,Ut=void 0;for(Q=E-2;Q>=-1&&Q!==-1;Q--)if(Math.abs(r[Q])<=St+Lt*(Math.abs(this.s[Q])+Math.abs(this.s[Q+1]))){r[Q]=0;break}if(Q===E-2)Ut=4;else{var wt=void 0;for(wt=E-1;wt>=Q&&wt!==Q;wt--){var nt=(wt!==E?Math.abs(r[wt]):0)+(wt!==Q+1?Math.abs(r[wt-1]):0);if(Math.abs(this.s[wt])<=St+Lt*nt){this.s[wt]=0;break}}wt===Q?Ut=3:wt===E-1?Ut=1:(Ut=2,Q=wt)}switch(Q++,Ut){case 1:{var et=r[E-2];r[E-2]=0;for(var pt=E-2;pt>=Q;pt--){var Et=u.hypot(this.s[pt],et),Ct=this.s[pt]/Et,mt=et/Et;if(this.s[pt]=Et,pt!==Q&&(et=-mt*r[pt-1],r[pt-1]=Ct*r[pt-1]),t)for(var Tt=0;Tt<this.n;Tt++)Et=Ct*this.V[Tt][pt]+mt*this.V[Tt][E-1],this.V[Tt][E-1]=-mt*this.V[Tt][pt]+Ct*this.V[Tt][E-1],this.V[Tt][pt]=Et}}break;case 2:{var Ot=r[Q-1];r[Q-1]=0;for(var It=Q;It<E;It++){var Wt=u.hypot(this.s[It],Ot),Pt=this.s[It]/Wt,Yt=Ot/Wt;if(this.s[It]=Wt,Ot=-Yt*r[It],r[It]=Pt*r[It],f)for(var bt=0;bt<this.m;bt++)Wt=Pt*this.U[bt][It]+Yt*this.U[bt][Q-1],this.U[bt][Q-1]=-Yt*this.U[bt][It]+Pt*this.U[bt][Q-1],this.U[bt][It]=Wt}}break;case 3:{var G=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[E-1]),Math.abs(this.s[E-2])),Math.abs(r[E-2])),Math.abs(this.s[Q])),Math.abs(r[Q])),H=this.s[E-1]/G,W=this.s[E-2]/G,z=r[E-2]/G,$=this.s[Q]/G,K=r[Q]/G,ut=((W+H)*(W-H)+z*z)/2,ft=H*z*(H*z),q=0;(function(Dt,Nt){return Dt||Nt})(ut!==0,ft!==0)&&(q=Math.sqrt(ut*ut+ft),ut<0&&(q=-q),q=ft/(ut+q));for(var ht=($+H)*($-H)+q,gt=$*K,rt=Q;rt<E-1;rt++){var vt=u.hypot(ht,gt),At=ht/vt,ot=gt/vt;if(rt!==Q&&(r[rt-1]=vt),ht=At*this.s[rt]+ot*r[rt],r[rt]=At*r[rt]-ot*this.s[rt],gt=ot*this.s[rt+1],this.s[rt+1]=At*this.s[rt+1],t)for(var it=0;it<this.n;it++)vt=At*this.V[it][rt]+ot*this.V[it][rt+1],this.V[it][rt+1]=-ot*this.V[it][rt]+At*this.V[it][rt+1],this.V[it][rt]=vt;if(vt=u.hypot(ht,gt),At=ht/vt,ot=gt/vt,this.s[rt]=vt,ht=At*r[rt]+ot*this.s[rt+1],this.s[rt+1]=-ot*r[rt]+At*this.s[rt+1],gt=ot*r[rt+1],r[rt+1]=At*r[rt+1],f&&rt<this.m-1)for(var dt=0;dt<this.m;dt++)vt=At*this.U[dt][rt]+ot*this.U[dt][rt+1],this.U[dt][rt+1]=-ot*this.U[dt][rt]+At*this.U[dt][rt+1],this.U[dt][rt]=vt}r[E-2]=ht,st=st+1}break;case 4:{if(this.s[Q]<=0&&(this.s[Q]=this.s[Q]<0?-this.s[Q]:0,t))for(var at=0;at<=J;at++)this.V[at][Q]=-this.V[at][Q];for(;Q<J&&!(this.s[Q]>=this.s[Q+1]);){var lt=this.s[Q];if(this.s[Q]=this.s[Q+1],this.s[Q+1]=lt,t&&Q<this.n-1)for(var Ft=0;Ft<this.n;Ft++)lt=this.V[Ft][Q+1],this.V[Ft][Q+1]=this.V[Ft][Q],this.V[Ft][Q]=lt;if(f&&Q<this.m-1)for(var xt=0;xt<this.m;xt++)lt=this.U[xt][Q+1],this.U[xt][Q+1]=this.U[xt][Q],this.U[xt][Q]=lt;Q++}st=0,E--}break}}var Vt={U:this.U,V:this.V,S:this.s};return Vt},u.hypot=function(o,a){var r=void 0;return Math.abs(o)>Math.abs(a)?(r=a/o,r=Math.abs(o)*Math.sqrt(1+r*r)):a!=0?(r=o/a,r=Math.abs(a)*Math.sqrt(1+r*r)):r=0,r},C.exports=u}),(function(C,A,T){"use strict";var u=(function(){function r(n,f){for(var t=0;t<f.length;t++){var g=f[t];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(n,g.key,g)}}return function(n,f,t){return f&&r(n.prototype,f),t&&r(n,t),n}})();function o(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}var a=(function(){function r(n,f){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;o(this,r),this.sequence1=n,this.sequence2=f,this.match_score=t,this.mismatch_penalty=g,this.gap_penalty=i,this.iMax=n.length+1,this.jMax=f.length+1,this.grid=new Array(this.iMax);for(var e=0;e<this.iMax;e++){this.grid[e]=new Array(this.jMax);for(var h=0;h<this.jMax;h++)this.grid[e][h]=0}this.tracebackGrid=new Array(this.iMax);for(var c=0;c<this.iMax;c++){this.tracebackGrid[c]=new Array(this.jMax);for(var l=0;l<this.jMax;l++)this.tracebackGrid[c][l]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return u(r,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var f=1;f<this.jMax;f++)this.grid[0][f]=this.grid[0][f-1]+this.gap_penalty,this.tracebackGrid[0][f]=[!1,!1,!0];for(var t=1;t<this.iMax;t++)this.grid[t][0]=this.grid[t-1][0]+this.gap_penalty,this.tracebackGrid[t][0]=[!1,!0,!1];for(var g=1;g<this.iMax;g++)for(var i=1;i<this.jMax;i++){var e=void 0;this.sequence1[g-1]===this.sequence2[i-1]?e=this.grid[g-1][i-1]+this.match_score:e=this.grid[g-1][i-1]+this.mismatch_penalty;var h=this.grid[g-1][i]+this.gap_penalty,c=this.grid[g][i-1]+this.gap_penalty,l=[e,h,c],N=this.arrayAllMaxIndexes(l);this.grid[g][i]=l[N[0]],this.tracebackGrid[g][i]=[N.includes(0),N.includes(1),N.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var f=[];for(f.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});f[0];){var t=f[0],g=this.tracebackGrid[t.pos[0]][t.pos[1]];g[0]&&f.push({pos:[t.pos[0]-1,t.pos[1]-1],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),g[1]&&f.push({pos:[t.pos[0]-1,t.pos[1]],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:"-"+t.seq2}),g[2]&&f.push({pos:[t.pos[0],t.pos[1]-1],seq1:"-"+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),t.pos[0]===0&&t.pos[1]===0&&this.alignments.push({sequence1:t.seq1,sequence2:t.seq2}),f.shift()}return this.alignments}},{key:"getAllIndexes",value:function(f,t){for(var g=[],i=-1;(i=f.indexOf(t,i+1))!==-1;)g.push(i);return g}},{key:"arrayAllMaxIndexes",value:function(f){return this.getAllIndexes(f,Math.max.apply(null,f))}}]),r})();C.exports=a}),(function(C,A,T){"use strict";var u=function(){};u.FDLayout=T(18),u.FDLayoutConstants=T(4),u.FDLayoutEdge=T(19),u.FDLayoutNode=T(20),u.DimensionD=T(21),u.HashMap=T(22),u.HashSet=T(23),u.IGeometry=T(8),u.IMath=T(9),u.Integer=T(10),u.Point=T(12),u.PointD=T(5),u.RandomSeed=T(16),u.RectangleD=T(13),u.Transform=T(17),u.UniqueIDGeneretor=T(14),u.Quicksort=T(25),u.LinkedList=T(11),u.LGraphObject=T(2),u.LGraph=T(6),u.LEdge=T(1),u.LGraphManager=T(7),u.LNode=T(3),u.Layout=T(15),u.LayoutConstants=T(0),u.NeedlemanWunsch=T(27),u.Matrix=T(24),u.SVD=T(26),C.exports=u}),(function(C,A,T){"use strict";function u(){this.listeners=[]}var o=u.prototype;o.addListener=function(a,r){this.listeners.push({event:a,callback:r})},o.removeListener=function(a,r){for(var n=this.listeners.length;n>=0;n--){var f=this.listeners[n];f.event===a&&f.callback===r&&this.listeners.splice(n,1)}},o.emit=function(a,r){for(var n=0;n<this.listeners.length;n++){var f=this.listeners[n];a===f.event&&f.callback(r)}},C.exports=u})])})});var Me=me((ne,Ae)=>{"use strict";(function(A,T){typeof ne=="object"&&typeof Ae=="object"?Ae.exports=T(Ce()):typeof define=="function"&&define.amd?define(["layout-base"],T):typeof ne=="object"?ne.coseBase=T(Ce()):A.coseBase=T(A.layoutBase)})(ne,function(C){return(()=>{"use strict";var A={45:((a,r,n)=>{var f={};f.layoutBase=n(551),f.CoSEConstants=n(806),f.CoSEEdge=n(767),f.CoSEGraph=n(880),f.CoSEGraphManager=n(578),f.CoSELayout=n(765),f.CoSENode=n(991),f.ConstraintHandler=n(902),a.exports=f}),806:((a,r,n)=>{var f=n(551).FDLayoutConstants;function t(){}for(var g in f)t[g]=f[g];t.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,t.DEFAULT_RADIAL_SEPARATION=f.DEFAULT_EDGE_LENGTH,t.DEFAULT_COMPONENT_SEPERATION=60,t.TILE=!0,t.TILING_PADDING_VERTICAL=10,t.TILING_PADDING_HORIZONTAL=10,t.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,t.ENFORCE_CONSTRAINTS=!0,t.APPLY_LAYOUT=!0,t.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,t.TREE_REDUCTION_ON_INCREMENTAL=!0,t.PURE_INCREMENTAL=t.DEFAULT_INCREMENTAL,a.exports=t}),767:((a,r,n)=>{var f=n(551).FDLayoutEdge;function t(i,e,h){f.call(this,i,e,h)}t.prototype=Object.create(f.prototype);for(var g in f)t[g]=f[g];a.exports=t}),880:((a,r,n)=>{var f=n(551).LGraph;function t(i,e,h){f.call(this,i,e,h)}t.prototype=Object.create(f.prototype);for(var g in f)t[g]=f[g];a.exports=t}),578:((a,r,n)=>{var f=n(551).LGraphManager;function t(i){f.call(this,i)}t.prototype=Object.create(f.prototype);for(var g in f)t[g]=f[g];a.exports=t}),765:((a,r,n)=>{var f=n(551).FDLayout,t=n(578),g=n(880),i=n(991),e=n(767),h=n(806),c=n(902),l=n(551).FDLayoutConstants,N=n(551).LayoutConstants,y=n(551).Point,p=n(551).PointD,L=n(551).DimensionD,R=n(551).Layout,M=n(551).Integer,S=n(551).IGeometry,B=n(551).LGraph,Y=n(551).Transform,tt=n(551).LinkedList;function x(){f.call(this),this.toBeTiled={},this.constraints={}}x.prototype=Object.create(f.prototype);for(var k in f)x[k]=f[k];x.prototype.newGraphManager=function(){var s=new t(this);return this.graphManager=s,s},x.prototype.newGraph=function(s){return new g(null,this.graphManager,s)},x.prototype.newNode=function(s){return new i(this.graphManager,s)},x.prototype.newEdge=function(s){return new e(null,null,s)},x.prototype.initParameters=function(){f.prototype.initParameters.call(this,arguments),this.isSubLayout||(h.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=h.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=h.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=l.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=l.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=l.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},x.prototype.initSpringEmbedder=function(){f.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/l.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},x.prototype.layout=function(){var s=N.DEFAULT_CREATE_BENDS_AS_NEEDED;return s&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},x.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(h.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),v=this.nodesWithGravity.filter(function(D){return E.has(D)});this.graphManager.setAllNodesToApplyGravitation(v)}}else{var s=this.getFlatForest();if(s.length>0)this.positionNodesRadially(s);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),v=this.nodesWithGravity.filter(function(m){return E.has(m)});this.graphManager.setAllNodesToApplyGravitation(v),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(c.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),h.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},x.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%l.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var s=new Set(this.getAllNodes()),E=this.nodesWithGravity.filter(function(d){return s.has(d)});this.graphManager.setAllNodesToApplyGravitation(E),this.graphManager.updateBounds(),this.updateGrid(),h.PURE_INCREMENTAL?this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),h.PURE_INCREMENTAL?this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var v=!this.isTreeGrowing&&!this.isGrowthFinished,m=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(v,m),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},x.prototype.getPositionsData=function(){for(var s=this.graphManager.getAllNodes(),E={},v=0;v<s.length;v++){var m=s[v].rect,d=s[v].id;E[d]={id:d,x:m.getCenterX(),y:m.getCenterY(),w:m.width,h:m.height}}return E},x.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var s=!1;if(l.ANIMATE==="during")this.emit("layoutstarted");else{for(;!s;)s=this.tick();this.graphManager.updateBounds()}},x.prototype.moveNodes=function(){for(var s=this.getAllNodes(),E,v=0;v<s.length;v++)E=s[v],E.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var v=0;v<s.length;v++)E=s[v],E.move()},x.prototype.initConstraintVariables=function(){var s=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var E=this.graphManager.getAllNodes(),v=0;v<E.length;v++){var m=E[v];this.idToNodeMap.set(m.id,m)}var d=function w(U){for(var X=U.getChild().getNodes(),J,st=0,Lt=0;Lt<X.length;Lt++)J=X[Lt],J.getChild()==null?s.fixedNodeSet.has(J.id)&&(st+=100):st+=w(J);return st};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(X){s.fixedNodeSet.add(X.nodeId)});for(var E=this.graphManager.getAllNodes(),m,v=0;v<E.length;v++)if(m=E[v],m.getChild()!=null){var D=d(m);D>0&&(m.fixedNodeWeight=D)}}if(this.constraints.relativePlacementConstraint){var O=new Map,P=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(w){s.fixedNodesOnHorizontal.add(w),s.fixedNodesOnVertical.add(w)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var F=this.constraints.alignmentConstraint.vertical,v=0;v<F.length;v++)this.dummyToNodeForVerticalAlignment.set("dummy"+v,[]),F[v].forEach(function(U){O.set(U,"dummy"+v),s.dummyToNodeForVerticalAlignment.get("dummy"+v).push(U),s.fixedNodeSet.has(U)&&s.fixedNodesOnHorizontal.add("dummy"+v)});if(this.constraints.alignmentConstraint.horizontal)for(var I=this.constraints.alignmentConstraint.horizontal,v=0;v<I.length;v++)this.dummyToNodeForHorizontalAlignment.set("dummy"+v,[]),I[v].forEach(function(U){P.set(U,"dummy"+v),s.dummyToNodeForHorizontalAlignment.get("dummy"+v).push(U),s.fixedNodeSet.has(U)&&s.fixedNodesOnVertical.add("dummy"+v)})}if(h.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(w){var U,X,J;for(J=w.length-1;J>=2*w.length/3;J--)U=Math.floor(Math.random()*(J+1)),X=w[J],w[J]=w[U],w[U]=X;return w},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(w){if(w.left){var U=O.has(w.left)?O.get(w.left):w.left,X=O.has(w.right)?O.get(w.right):w.right;s.nodesInRelativeHorizontal.includes(U)||(s.nodesInRelativeHorizontal.push(U),s.nodeToRelativeConstraintMapHorizontal.set(U,[]),s.dummyToNodeForVerticalAlignment.has(U)?s.nodeToTempPositionMapHorizontal.set(U,s.idToNodeMap.get(s.dummyToNodeForVerticalAlignment.get(U)[0]).getCenterX()):s.nodeToTempPositionMapHorizontal.set(U,s.idToNodeMap.get(U).getCenterX())),s.nodesInRelativeHorizontal.includes(X)||(s.nodesInRelativeHorizontal.push(X),s.nodeToRelativeConstraintMapHorizontal.set(X,[]),s.dummyToNodeForVerticalAlignment.has(X)?s.nodeToTempPositionMapHorizontal.set(X,s.idToNodeMap.get(s.dummyToNodeForVerticalAlignment.get(X)[0]).getCenterX()):s.nodeToTempPositionMapHorizontal.set(X,s.idToNodeMap.get(X).getCenterX())),s.nodeToRelativeConstraintMapHorizontal.get(U).push({right:X,gap:w.gap}),s.nodeToRelativeConstraintMapHorizontal.get(X).push({left:U,gap:w.gap})}else{var J=P.has(w.top)?P.get(w.top):w.top,st=P.has(w.bottom)?P.get(w.bottom):w.bottom;s.nodesInRelativeVertical.includes(J)||(s.nodesInRelativeVertical.push(J),s.nodeToRelativeConstraintMapVertical.set(J,[]),s.dummyToNodeForHorizontalAlignment.has(J)?s.nodeToTempPositionMapVertical.set(J,s.idToNodeMap.get(s.dummyToNodeForHorizontalAlignment.get(J)[0]).getCenterY()):s.nodeToTempPositionMapVertical.set(J,s.idToNodeMap.get(J).getCenterY())),s.nodesInRelativeVertical.includes(st)||(s.nodesInRelativeVertical.push(st),s.nodeToRelativeConstraintMapVertical.set(st,[]),s.dummyToNodeForHorizontalAlignment.has(st)?s.nodeToTempPositionMapVertical.set(st,s.idToNodeMap.get(s.dummyToNodeForHorizontalAlignment.get(st)[0]).getCenterY()):s.nodeToTempPositionMapVertical.set(st,s.idToNodeMap.get(st).getCenterY())),s.nodeToRelativeConstraintMapVertical.get(J).push({bottom:st,gap:w.gap}),s.nodeToRelativeConstraintMapVertical.get(st).push({top:J,gap:w.gap})}});else{var Z=new Map,_=new Map;this.constraints.relativePlacementConstraint.forEach(function(w){if(w.left){var U=O.has(w.left)?O.get(w.left):w.left,X=O.has(w.right)?O.get(w.right):w.right;Z.has(U)?Z.get(U).push(X):Z.set(U,[X]),Z.has(X)?Z.get(X).push(U):Z.set(X,[U])}else{var J=P.has(w.top)?P.get(w.top):w.top,st=P.has(w.bottom)?P.get(w.bottom):w.bottom;_.has(J)?_.get(J).push(st):_.set(J,[st]),_.has(st)?_.get(st).push(J):_.set(st,[J])}});var b=function(U,X){var J=[],st=[],Lt=new tt,St=new Set,Q=0;return U.forEach(function(Ut,wt){if(!St.has(wt)){J[Q]=[],st[Q]=!1;var nt=wt;for(Lt.push(nt),St.add(nt),J[Q].push(nt);Lt.length!=0;){nt=Lt.shift(),X.has(nt)&&(st[Q]=!0);var et=U.get(nt);et.forEach(function(pt){St.has(pt)||(Lt.push(pt),St.add(pt),J[Q].push(pt))})}Q++}}),{components:J,isFixed:st}},j=b(Z,s.fixedNodesOnHorizontal);this.componentsOnHorizontal=j.components,this.fixedComponentsOnHorizontal=j.isFixed;var V=b(_,s.fixedNodesOnVertical);this.componentsOnVertical=V.components,this.fixedComponentsOnVertical=V.isFixed}}},x.prototype.updateDisplacements=function(){var s=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(V){var w=s.idToNodeMap.get(V.nodeId);w.displacementX=0,w.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var E=this.constraints.alignmentConstraint.vertical,v=0;v<E.length;v++){for(var m=0,d=0;d<E[v].length;d++){if(this.fixedNodeSet.has(E[v][d])){m=0;break}m+=this.idToNodeMap.get(E[v][d]).displacementX}for(var D=m/E[v].length,d=0;d<E[v].length;d++)this.idToNodeMap.get(E[v][d]).displacementX=D}if(this.constraints.alignmentConstraint.horizontal)for(var O=this.constraints.alignmentConstraint.horizontal,v=0;v<O.length;v++){for(var P=0,d=0;d<O[v].length;d++){if(this.fixedNodeSet.has(O[v][d])){P=0;break}P+=this.idToNodeMap.get(O[v][d]).displacementY}for(var F=P/O[v].length,d=0;d<O[v].length;d++)this.idToNodeMap.get(O[v][d]).displacementY=F}}if(this.constraints.relativePlacementConstraint)if(h.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(V){if(!s.fixedNodesOnHorizontal.has(V)){var w=0;s.dummyToNodeForVerticalAlignment.has(V)?w=s.idToNodeMap.get(s.dummyToNodeForVerticalAlignment.get(V)[0]).displacementX:w=s.idToNodeMap.get(V).displacementX,s.nodeToRelativeConstraintMapHorizontal.get(V).forEach(function(U){if(U.right){var X=s.nodeToTempPositionMapHorizontal.get(U.right)-s.nodeToTempPositionMapHorizontal.get(V)-w;X<U.gap&&(w-=U.gap-X)}else{var X=s.nodeToTempPositionMapHorizontal.get(V)-s.nodeToTempPositionMapHorizontal.get(U.left)+w;X<U.gap&&(w+=U.gap-X)}}),s.nodeToTempPositionMapHorizontal.set(V,s.nodeToTempPositionMapHorizontal.get(V)+w),s.dummyToNodeForVerticalAlignment.has(V)?s.dummyToNodeForVerticalAlignment.get(V).forEach(function(U){s.idToNodeMap.get(U).displacementX=w}):s.idToNodeMap.get(V).displacementX=w}}),this.nodesInRelativeVertical.forEach(function(V){if(!s.fixedNodesOnHorizontal.has(V)){var w=0;s.dummyToNodeForHorizontalAlignment.has(V)?w=s.idToNodeMap.get(s.dummyToNodeForHorizontalAlignment.get(V)[0]).displacementY:w=s.idToNodeMap.get(V).displacementY,s.nodeToRelativeConstraintMapVertical.get(V).forEach(function(U){if(U.bottom){var X=s.nodeToTempPositionMapVertical.get(U.bottom)-s.nodeToTempPositionMapVertical.get(V)-w;X<U.gap&&(w-=U.gap-X)}else{var X=s.nodeToTempPositionMapVertical.get(V)-s.nodeToTempPositionMapVertical.get(U.top)+w;X<U.gap&&(w+=U.gap-X)}}),s.nodeToTempPositionMapVertical.set(V,s.nodeToTempPositionMapVertical.get(V)+w),s.dummyToNodeForHorizontalAlignment.has(V)?s.dummyToNodeForHorizontalAlignment.get(V).forEach(function(U){s.idToNodeMap.get(U).displacementY=w}):s.idToNodeMap.get(V).displacementY=w}});else{for(var v=0;v<this.componentsOnHorizontal.length;v++){var I=this.componentsOnHorizontal[v];if(this.fixedComponentsOnHorizontal[v])for(var d=0;d<I.length;d++)this.dummyToNodeForVerticalAlignment.has(I[d])?this.dummyToNodeForVerticalAlignment.get(I[d]).forEach(function(U){s.idToNodeMap.get(U).displacementX=0}):this.idToNodeMap.get(I[d]).displacementX=0;else{for(var Z=0,_=0,d=0;d<I.length;d++)if(this.dummyToNodeForVerticalAlignment.has(I[d])){var b=this.dummyToNodeForVerticalAlignment.get(I[d]);Z+=b.length*this.idToNodeMap.get(b[0]).displacementX,_+=b.length}else Z+=this.idToNodeMap.get(I[d]).displacementX,_++;for(var j=Z/_,d=0;d<I.length;d++)this.dummyToNodeForVerticalAlignment.has(I[d])?this.dummyToNodeForVerticalAlignment.get(I[d]).forEach(function(U){s.idToNodeMap.get(U).displacementX=j}):this.idToNodeMap.get(I[d]).displacementX=j}}for(var v=0;v<this.componentsOnVertical.length;v++){var I=this.componentsOnVertical[v];if(this.fixedComponentsOnVertical[v])for(var d=0;d<I.length;d++)this.dummyToNodeForHorizontalAlignment.has(I[d])?this.dummyToNodeForHorizontalAlignment.get(I[d]).forEach(function(X){s.idToNodeMap.get(X).displacementY=0}):this.idToNodeMap.get(I[d]).displacementY=0;else{for(var Z=0,_=0,d=0;d<I.length;d++)if(this.dummyToNodeForHorizontalAlignment.has(I[d])){var b=this.dummyToNodeForHorizontalAlignment.get(I[d]);Z+=b.length*this.idToNodeMap.get(b[0]).displacementY,_+=b.length}else Z+=this.idToNodeMap.get(I[d]).displacementY,_++;for(var j=Z/_,d=0;d<I.length;d++)this.dummyToNodeForHorizontalAlignment.has(I[d])?this.dummyToNodeForHorizontalAlignment.get(I[d]).forEach(function(Lt){s.idToNodeMap.get(Lt).displacementY=j}):this.idToNodeMap.get(I[d]).displacementY=j}}}},x.prototype.calculateNodesToApplyGravitationTo=function(){var s=[],E,v=this.graphManager.getGraphs(),m=v.length,d;for(d=0;d<m;d++)E=v[d],E.updateConnected(),E.isConnected||(s=s.concat(E.getNodes()));return s},x.prototype.createBendpoints=function(){var s=[];s=s.concat(this.graphManager.getAllEdges());var E=new Set,v;for(v=0;v<s.length;v++){var m=s[v];if(!E.has(m)){var d=m.getSource(),D=m.getTarget();if(d==D)m.getBendpoints().push(new p),m.getBendpoints().push(new p),this.createDummyNodesForBendpoints(m),E.add(m);else{var O=[];if(O=O.concat(d.getEdgeListToNode(D)),O=O.concat(D.getEdgeListToNode(d)),!E.has(O[0])){if(O.length>1){var P;for(P=0;P<O.length;P++){var F=O[P];F.getBendpoints().push(new p),this.createDummyNodesForBendpoints(F)}}O.forEach(function(I){E.add(I)})}}}if(E.size==s.length)break}},x.prototype.positionNodesRadially=function(s){for(var E=new y(0,0),v=Math.ceil(Math.sqrt(s.length)),m=0,d=0,D=0,O=new p(0,0),P=0;P<s.length;P++){P%v==0&&(D=0,d=m,P!=0&&(d+=h.DEFAULT_COMPONENT_SEPERATION),m=0);var F=s[P],I=R.findCenterOfTree(F);E.x=D,E.y=d,O=x.radialLayout(F,I,E),O.y>m&&(m=Math.floor(O.y)),D=Math.floor(O.x+h.DEFAULT_COMPONENT_SEPERATION)}this.transform(new p(N.WORLD_CENTER_X-O.x/2,N.WORLD_CENTER_Y-O.y/2))},x.radialLayout=function(s,E,v){var m=Math.max(this.maxDiagonalInTree(s),h.DEFAULT_RADIAL_SEPARATION);x.branchRadialLayout(E,null,0,359,0,m);var d=B.calculateBounds(s),D=new Y;D.setDeviceOrgX(d.getMinX()),D.setDeviceOrgY(d.getMinY()),D.setWorldOrgX(v.x),D.setWorldOrgY(v.y);for(var O=0;O<s.length;O++){var P=s[O];P.transform(D)}var F=new p(d.getMaxX(),d.getMaxY());return D.inverseTransformPoint(F)},x.branchRadialLayout=function(s,E,v,m,d,D){var O=(m-v+1)/2;O<0&&(O+=180);var P=(O+v)%360,F=P*S.TWO_PI/360,I=Math.cos(F),Z=d*Math.cos(F),_=d*Math.sin(F);s.setCenter(Z,_);var b=[];b=b.concat(s.getEdges());var j=b.length;E!=null&&j--;for(var V=0,w=b.length,U,X=s.getEdgesBetween(E);X.length>1;){var J=X[0];X.splice(0,1);var st=b.indexOf(J);st>=0&&b.splice(st,1),w--,j--}E!=null?U=(b.indexOf(X[0])+1)%w:U=0;for(var Lt=Math.abs(m-v)/j,St=U;V!=j;St=++St%w){var Q=b[St].getOtherEnd(s);if(Q!=E){var Ut=(v+V*Lt)%360,wt=(Ut+Lt)%360;x.branchRadialLayout(Q,s,Ut,wt,d+D,D),V++}}},x.maxDiagonalInTree=function(s){for(var E=M.MIN_VALUE,v=0;v<s.length;v++){var m=s[v],d=m.getDiagonal();d>E&&(E=d)}return E},x.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},x.prototype.groupZeroDegreeMembers=function(){var s=this,E={};this.memberGroups={},this.idToDummyNode={};for(var v=[],m=this.graphManager.getAllNodes(),d=0;d<m.length;d++){var D=m[d],O=D.getParent();this.getNodeDegreeWithChildren(D)===0&&(O.id==null||!this.getToBeTiled(O))&&v.push(D)}for(var d=0;d<v.length;d++){var D=v[d],P=D.getParent().id;typeof E[P]>"u"&&(E[P]=[]),E[P]=E[P].concat(D)}Object.keys(E).forEach(function(F){if(E[F].length>1){var I="DummyCompound_"+F;s.memberGroups[I]=E[F];var Z=E[F][0].getParent(),_=new i(s.graphManager);_.id=I,_.paddingLeft=Z.paddingLeft||0,_.paddingRight=Z.paddingRight||0,_.paddingBottom=Z.paddingBottom||0,_.paddingTop=Z.paddingTop||0,s.idToDummyNode[I]=_;var b=s.getGraphManager().add(s.newGraph(),_),j=Z.getChild();j.add(_);for(var V=0;V<E[F].length;V++){var w=E[F][V];j.remove(w),b.add(w)}}})},x.prototype.clearCompounds=function(){var s={},E={};this.performDFSOnCompounds();for(var v=0;v<this.compoundOrder.length;v++)E[this.compoundOrder[v].id]=this.compoundOrder[v],s[this.compoundOrder[v].id]=[].concat(this.compoundOrder[v].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[v].getChild()),this.compoundOrder[v].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(s,E)},x.prototype.clearZeroDegreeMembers=function(){var s=this,E=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(v){var m=s.idToDummyNode[v];if(E[v]=s.tileNodes(s.memberGroups[v],m.paddingLeft+m.paddingRight),m.rect.width=E[v].width,m.rect.height=E[v].height,m.setCenter(E[v].centerX,E[v].centerY),m.labelMarginLeft=0,m.labelMarginTop=0,h.NODE_DIMENSIONS_INCLUDE_LABELS){var d=m.rect.width,D=m.rect.height;m.labelWidth&&(m.labelPosHorizontal=="left"?(m.rect.x-=m.labelWidth,m.setWidth(d+m.labelWidth),m.labelMarginLeft=m.labelWidth):m.labelPosHorizontal=="center"&&m.labelWidth>d?(m.rect.x-=(m.labelWidth-d)/2,m.setWidth(m.labelWidth),m.labelMarginLeft=(m.labelWidth-d)/2):m.labelPosHorizontal=="right"&&m.setWidth(d+m.labelWidth)),m.labelHeight&&(m.labelPosVertical=="top"?(m.rect.y-=m.labelHeight,m.setHeight(D+m.labelHeight),m.labelMarginTop=m.labelHeight):m.labelPosVertical=="center"&&m.labelHeight>D?(m.rect.y-=(m.labelHeight-D)/2,m.setHeight(m.labelHeight),m.labelMarginTop=(m.labelHeight-D)/2):m.labelPosVertical=="bottom"&&m.setHeight(D+m.labelHeight))}})},x.prototype.repopulateCompounds=function(){for(var s=this.compoundOrder.length-1;s>=0;s--){var E=this.compoundOrder[s],v=E.id,m=E.paddingLeft,d=E.paddingTop,D=E.labelMarginLeft,O=E.labelMarginTop;this.adjustLocations(this.tiledMemberPack[v],E.rect.x,E.rect.y,m,d,D,O)}},x.prototype.repopulateZeroDegreeMembers=function(){var s=this,E=this.tiledZeroDegreePack;Object.keys(E).forEach(function(v){var m=s.idToDummyNode[v],d=m.paddingLeft,D=m.paddingTop,O=m.labelMarginLeft,P=m.labelMarginTop;s.adjustLocations(E[v],m.rect.x,m.rect.y,d,D,O,P)})},x.prototype.getToBeTiled=function(s){var E=s.id;if(this.toBeTiled[E]!=null)return this.toBeTiled[E];var v=s.getChild();if(v==null)return this.toBeTiled[E]=!1,!1;for(var m=v.getNodes(),d=0;d<m.length;d++){var D=m[d];if(this.getNodeDegree(D)>0)return this.toBeTiled[E]=!1,!1;if(D.getChild()==null){this.toBeTiled[D.id]=!1;continue}if(!this.getToBeTiled(D))return this.toBeTiled[E]=!1,!1}return this.toBeTiled[E]=!0,!0},x.prototype.getNodeDegree=function(s){for(var E=s.id,v=s.getEdges(),m=0,d=0;d<v.length;d++){var D=v[d];D.getSource().id!==D.getTarget().id&&(m=m+1)}return m},x.prototype.getNodeDegreeWithChildren=function(s){var E=this.getNodeDegree(s);if(s.getChild()==null)return E;for(var v=s.getChild().getNodes(),m=0;m<v.length;m++){var d=v[m];E+=this.getNodeDegreeWithChildren(d)}return E},x.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},x.prototype.fillCompexOrderByDFS=function(s){for(var E=0;E<s.length;E++){var v=s[E];v.getChild()!=null&&this.fillCompexOrderByDFS(v.getChild().getNodes()),this.getToBeTiled(v)&&this.compoundOrder.push(v)}},x.prototype.adjustLocations=function(s,E,v,m,d,D,O){E+=m+D,v+=d+O;for(var P=E,F=0;F<s.rows.length;F++){var I=s.rows[F];E=P;for(var Z=0,_=0;_<I.length;_++){var b=I[_];b.rect.x=E,b.rect.y=v,E+=b.rect.width+s.horizontalPadding,b.rect.height>Z&&(Z=b.rect.height)}v+=Z+s.verticalPadding}},x.prototype.tileCompoundMembers=function(s,E){var v=this;this.tiledMemberPack=[],Object.keys(s).forEach(function(m){var d=E[m];if(v.tiledMemberPack[m]=v.tileNodes(s[m],d.paddingLeft+d.paddingRight),d.rect.width=v.tiledMemberPack[m].width,d.rect.height=v.tiledMemberPack[m].height,d.setCenter(v.tiledMemberPack[m].centerX,v.tiledMemberPack[m].centerY),d.labelMarginLeft=0,d.labelMarginTop=0,h.NODE_DIMENSIONS_INCLUDE_LABELS){var D=d.rect.width,O=d.rect.height;d.labelWidth&&(d.labelPosHorizontal=="left"?(d.rect.x-=d.labelWidth,d.setWidth(D+d.labelWidth),d.labelMarginLeft=d.labelWidth):d.labelPosHorizontal=="center"&&d.labelWidth>D?(d.rect.x-=(d.labelWidth-D)/2,d.setWidth(d.labelWidth),d.labelMarginLeft=(d.labelWidth-D)/2):d.labelPosHorizontal=="right"&&d.setWidth(D+d.labelWidth)),d.labelHeight&&(d.labelPosVertical=="top"?(d.rect.y-=d.labelHeight,d.setHeight(O+d.labelHeight),d.labelMarginTop=d.labelHeight):d.labelPosVertical=="center"&&d.labelHeight>O?(d.rect.y-=(d.labelHeight-O)/2,d.setHeight(d.labelHeight),d.labelMarginTop=(d.labelHeight-O)/2):d.labelPosVertical=="bottom"&&d.setHeight(O+d.labelHeight))}})},x.prototype.tileNodes=function(s,E){var v=this.tileNodesByFavoringDim(s,E,!0),m=this.tileNodesByFavoringDim(s,E,!1),d=this.getOrgRatio(v),D=this.getOrgRatio(m),O;return D<d?O=m:O=v,O},x.prototype.getOrgRatio=function(s){var E=s.width,v=s.height,m=E/v;return m<1&&(m=1/m),m},x.prototype.calcIdealRowWidth=function(s,E){var v=h.TILING_PADDING_VERTICAL,m=h.TILING_PADDING_HORIZONTAL,d=s.length,D=0,O=0,P=0;s.forEach(function(V){D+=V.getWidth(),O+=V.getHeight(),V.getWidth()>P&&(P=V.getWidth())});var F=D/d,I=O/d,Z=Math.pow(v-m,2)+4*(F+m)*(I+v)*d,_=(m-v+Math.sqrt(Z))/(2*(F+m)),b;E?(b=Math.ceil(_),b==_&&b++):b=Math.floor(_);var j=b*(F+m)-m;return P>j&&(j=P),j+=m*2,j},x.prototype.tileNodesByFavoringDim=function(s,E,v){var m=h.TILING_PADDING_VERTICAL,d=h.TILING_PADDING_HORIZONTAL,D=h.TILING_COMPARE_BY,O={rows:[],rowWidth:[],rowHeight:[],width:0,height:E,verticalPadding:m,horizontalPadding:d,centerX:0,centerY:0};D&&(O.idealRowWidth=this.calcIdealRowWidth(s,v));var P=function(w){return w.rect.width*w.rect.height},F=function(w,U){return P(U)-P(w)};s.sort(function(V,w){var U=F;return O.idealRowWidth?(U=D,U(V.id,w.id)):U(V,w)});for(var I=0,Z=0,_=0;_<s.length;_++){var b=s[_];I+=b.getCenterX(),Z+=b.getCenterY()}O.centerX=I/s.length,O.centerY=Z/s.length;for(var _=0;_<s.length;_++){var b=s[_];if(O.rows.length==0)this.insertNodeToRow(O,b,0,E);else if(this.canAddHorizontal(O,b.rect.width,b.rect.height)){var j=O.rows.length-1;O.idealRowWidth||(j=this.getShortestRowIndex(O)),this.insertNodeToRow(O,b,j,E)}else this.insertNodeToRow(O,b,O.rows.length,E);this.shiftToLastRow(O)}return O},x.prototype.insertNodeToRow=function(s,E,v,m){var d=m;if(v==s.rows.length){var D=[];s.rows.push(D),s.rowWidth.push(d),s.rowHeight.push(0)}var O=s.rowWidth[v]+E.rect.width;s.rows[v].length>0&&(O+=s.horizontalPadding),s.rowWidth[v]=O,s.width<O&&(s.width=O);var P=E.rect.height;v>0&&(P+=s.verticalPadding);var F=0;P>s.rowHeight[v]&&(F=s.rowHeight[v],s.rowHeight[v]=P,F=s.rowHeight[v]-F),s.height+=F,s.rows[v].push(E)},x.prototype.getShortestRowIndex=function(s){for(var E=-1,v=Number.MAX_VALUE,m=0;m<s.rows.length;m++)s.rowWidth[m]<v&&(E=m,v=s.rowWidth[m]);return E},x.prototype.getLongestRowIndex=function(s){for(var E=-1,v=Number.MIN_VALUE,m=0;m<s.rows.length;m++)s.rowWidth[m]>v&&(E=m,v=s.rowWidth[m]);return E},x.prototype.canAddHorizontal=function(s,E,v){if(s.idealRowWidth){var m=s.rows.length-1,d=s.rowWidth[m];return d+E+s.horizontalPadding<=s.idealRowWidth}var D=this.getShortestRowIndex(s);if(D<0)return!0;var O=s.rowWidth[D];if(O+s.horizontalPadding+E<=s.width)return!0;var P=0;s.rowHeight[D]<v&&D>0&&(P=v+s.verticalPadding-s.rowHeight[D]);var F;s.width-O>=E+s.horizontalPadding?F=(s.height+P)/(O+E+s.horizontalPadding):F=(s.height+P)/s.width,P=v+s.verticalPadding;var I;return s.width<E?I=(s.height+P)/E:I=(s.height+P)/s.width,I<1&&(I=1/I),F<1&&(F=1/F),F<I},x.prototype.shiftToLastRow=function(s){var E=this.getLongestRowIndex(s),v=s.rowWidth.length-1,m=s.rows[E],d=m[m.length-1],D=d.width+s.horizontalPadding;if(s.width-s.rowWidth[v]>D&&E!=v){m.splice(-1,1),s.rows[v].push(d),s.rowWidth[E]=s.rowWidth[E]-D,s.rowWidth[v]=s.rowWidth[v]+D,s.width=s.rowWidth[instance.getLongestRowIndex(s)];for(var O=Number.MIN_VALUE,P=0;P<m.length;P++)m[P].height>O&&(O=m[P].height);E>0&&(O+=s.verticalPadding);var F=s.rowHeight[E]+s.rowHeight[v];s.rowHeight[E]=O,s.rowHeight[v]<d.height+s.verticalPadding&&(s.rowHeight[v]=d.height+s.verticalPadding);var I=s.rowHeight[E]+s.rowHeight[v];s.height+=I-F,this.shiftToLastRow(s)}},x.prototype.tilingPreLayout=function(){h.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},x.prototype.tilingPostLayout=function(){h.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},x.prototype.reduceTrees=function(){for(var s=[],E=!0,v;E;){var m=this.graphManager.getAllNodes(),d=[];E=!1;for(var D=0;D<m.length;D++)if(v=m[D],v.getEdges().length==1&&!v.getEdges()[0].isInterGraph&&v.getChild()==null){if(h.PURE_INCREMENTAL){var O=v.getEdges()[0].getOtherEnd(v),P=new L(v.getCenterX()-O.getCenterX(),v.getCenterY()-O.getCenterY());d.push([v,v.getEdges()[0],v.getOwner(),P])}else d.push([v,v.getEdges()[0],v.getOwner()]);E=!0}if(E==!0){for(var F=[],I=0;I<d.length;I++)d[I][0].getEdges().length==1&&(F.push(d[I]),d[I][0].getOwner().remove(d[I][0]));s.push(F),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=s},x.prototype.growTree=function(s){for(var E=s.length,v=s[E-1],m,d=0;d<v.length;d++)m=v[d],this.findPlaceforPrunedNode(m),m[2].add(m[0]),m[2].add(m[1],m[1].source,m[1].target);s.splice(s.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},x.prototype.findPlaceforPrunedNode=function(s){var E,v,m=s[0];if(m==s[1].source?v=s[1].target:v=s[1].source,h.PURE_INCREMENTAL)m.setCenter(v.getCenterX()+s[3].getWidth(),v.getCenterY()+s[3].getHeight());else{var d=v.startX,D=v.finishX,O=v.startY,P=v.finishY,F=0,I=0,Z=0,_=0,b=[F,Z,I,_];if(O>0)for(var j=d;j<=D;j++)b[0]+=this.grid[j][O-1].length+this.grid[j][O].length-1;if(D<this.grid.length-1)for(var j=O;j<=P;j++)b[1]+=this.grid[D+1][j].length+this.grid[D][j].length-1;if(P<this.grid[0].length-1)for(var j=d;j<=D;j++)b[2]+=this.grid[j][P+1].length+this.grid[j][P].length-1;if(d>0)for(var j=O;j<=P;j++)b[3]+=this.grid[d-1][j].length+this.grid[d][j].length-1;for(var V=M.MAX_VALUE,w,U,X=0;X<b.length;X++)b[X]<V?(V=b[X],w=1,U=X):b[X]==V&&w++;if(w==3&&V==0)b[0]==0&&b[1]==0&&b[2]==0?E=1:b[0]==0&&b[1]==0&&b[3]==0?E=0:b[0]==0&&b[2]==0&&b[3]==0?E=3:b[1]==0&&b[2]==0&&b[3]==0&&(E=2);else if(w==2&&V==0){var J=Math.floor(Math.random()*2);b[0]==0&&b[1]==0?J==0?E=0:E=1:b[0]==0&&b[2]==0?J==0?E=0:E=2:b[0]==0&&b[3]==0?J==0?E=0:E=3:b[1]==0&&b[2]==0?J==0?E=1:E=2:b[1]==0&&b[3]==0?J==0?E=1:E=3:J==0?E=2:E=3}else if(w==4&&V==0){var J=Math.floor(Math.random()*4);E=J}else E=U;E==0?m.setCenter(v.getCenterX(),v.getCenterY()-v.getHeight()/2-l.DEFAULT_EDGE_LENGTH-m.getHeight()/2):E==1?m.setCenter(v.getCenterX()+v.getWidth()/2+l.DEFAULT_EDGE_LENGTH+m.getWidth()/2,v.getCenterY()):E==2?m.setCenter(v.getCenterX(),v.getCenterY()+v.getHeight()/2+l.DEFAULT_EDGE_LENGTH+m.getHeight()/2):m.setCenter(v.getCenterX()-v.getWidth()/2-l.DEFAULT_EDGE_LENGTH-m.getWidth()/2,v.getCenterY())}},a.exports=x}),991:((a,r,n)=>{var f=n(551).FDLayoutNode,t=n(551).IMath;function g(e,h,c,l){f.call(this,e,h,c,l)}g.prototype=Object.create(f.prototype);for(var i in f)g[i]=f[i];g.prototype.calculateDisplacement=function(){var e=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*t.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*t.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},g.prototype.propogateDisplacementToChildren=function(e,h){for(var c=this.getChild().getNodes(),l,N=0;N<c.length;N++)l=c[N],l.getChild()==null?(l.displacementX+=e,l.displacementY+=h):l.propogateDisplacementToChildren(e,h)},g.prototype.move=function(){var e=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},g.prototype.setPred1=function(e){this.pred1=e},g.prototype.getPred1=function(){return pred1},g.prototype.getPred2=function(){return pred2},g.prototype.setNext=function(e){this.next=e},g.prototype.getNext=function(){return next},g.prototype.setProcessed=function(e){this.processed=e},g.prototype.isProcessed=function(){return processed},a.exports=g}),902:((a,r,n)=>{function f(c){if(Array.isArray(c)){for(var l=0,N=Array(c.length);l<c.length;l++)N[l]=c[l];return N}else return Array.from(c)}var t=n(806),g=n(551).LinkedList,i=n(551).Matrix,e=n(551).SVD;function h(){}h.handleConstraints=function(c){var l={};l.fixedNodeConstraint=c.constraints.fixedNodeConstraint,l.alignmentConstraint=c.constraints.alignmentConstraint,l.relativePlacementConstraint=c.constraints.relativePlacementConstraint;for(var N=new Map,y=new Map,p=[],L=[],R=c.getAllNodes(),M=0,S=0;S<R.length;S++){var B=R[S];B.getChild()==null&&(y.set(B.id,M++),p.push(B.getCenterX()),L.push(B.getCenterY()),N.set(B.id,B))}l.relativePlacementConstraint&&l.relativePlacementConstraint.forEach(function(G){!G.gap&&G.gap!=0&&(G.left?G.gap=t.DEFAULT_EDGE_LENGTH+N.get(G.left).getWidth()/2+N.get(G.right).getWidth()/2:G.gap=t.DEFAULT_EDGE_LENGTH+N.get(G.top).getHeight()/2+N.get(G.bottom).getHeight()/2)});var Y=function(H,W){return{x:H.x-W.x,y:H.y-W.y}},tt=function(H){var W=0,z=0;return H.forEach(function($){W+=p[y.get($)],z+=L[y.get($)]}),{x:W/H.size,y:z/H.size}},x=function(H,W,z,$,K){function ut(ot,it){var dt=new Set(ot),at=!0,lt=!1,Ft=void 0;try{for(var xt=it[Symbol.iterator](),Vt;!(at=(Vt=xt.next()).done);at=!0){var Dt=Vt.value;dt.add(Dt)}}catch(Nt){lt=!0,Ft=Nt}finally{try{!at&&xt.return&&xt.return()}finally{if(lt)throw Ft}}return dt}var ft=new Map;H.forEach(function(ot,it){ft.set(it,0)}),H.forEach(function(ot,it){ot.forEach(function(dt){ft.set(dt.id,ft.get(dt.id)+1)})});var q=new Map,ht=new Map,gt=new g;ft.forEach(function(ot,it){ot==0?(gt.push(it),z||(W=="horizontal"?q.set(it,y.has(it)?p[y.get(it)]:$.get(it)):q.set(it,y.has(it)?L[y.get(it)]:$.get(it)))):q.set(it,Number.NEGATIVE_INFINITY),z&&ht.set(it,new Set([it]))}),z&&K.forEach(function(ot){var it=[];if(ot.forEach(function(lt){z.has(lt)&&it.push(lt)}),it.length>0){var dt=0;it.forEach(function(lt){W=="horizontal"?(q.set(lt,y.has(lt)?p[y.get(lt)]:$.get(lt)),dt+=q.get(lt)):(q.set(lt,y.has(lt)?L[y.get(lt)]:$.get(lt)),dt+=q.get(lt))}),dt=dt/it.length,ot.forEach(function(lt){z.has(lt)||q.set(lt,dt)})}else{var at=0;ot.forEach(function(lt){W=="horizontal"?at+=y.has(lt)?p[y.get(lt)]:$.get(lt):at+=y.has(lt)?L[y.get(lt)]:$.get(lt)}),at=at/ot.length,ot.forEach(function(lt){q.set(lt,at)})}});for(var rt=function(){var it=gt.shift(),dt=H.get(it);dt.forEach(function(at){if(q.get(at.id)<q.get(it)+at.gap)if(z&&z.has(at.id)){var lt=void 0;if(W=="horizontal"?lt=y.has(at.id)?p[y.get(at.id)]:$.get(at.id):lt=y.has(at.id)?L[y.get(at.id)]:$.get(at.id),q.set(at.id,lt),lt<q.get(it)+at.gap){var Ft=q.get(it)+at.gap-lt;ht.get(it).forEach(function(xt){q.set(xt,q.get(xt)-Ft)})}}else q.set(at.id,q.get(it)+at.gap);ft.set(at.id,ft.get(at.id)-1),ft.get(at.id)==0&&gt.push(at.id),z&&ht.set(at.id,ut(ht.get(it),ht.get(at.id)))})};gt.length!=0;)rt();if(z){var vt=new Set;H.forEach(function(ot,it){ot.length==0&&vt.add(it)});var At=[];ht.forEach(function(ot,it){if(vt.has(it)){var dt=!1,at=!0,lt=!1,Ft=void 0;try{for(var xt=ot[Symbol.iterator](),Vt;!(at=(Vt=xt.next()).done);at=!0){var Dt=Vt.value;z.has(Dt)&&(dt=!0)}}catch(Rt){lt=!0,Ft=Rt}finally{try{!at&&xt.return&&xt.return()}finally{if(lt)throw Ft}}if(!dt){var Nt=!1,$t=void 0;At.forEach(function(Rt,Xt){Rt.has([].concat(f(ot))[0])&&(Nt=!0,$t=Xt)}),Nt?ot.forEach(function(Rt){At[$t].add(Rt)}):At.push(new Set(ot))}}}),At.forEach(function(ot,it){var dt=Number.POSITIVE_INFINITY,at=Number.POSITIVE_INFINITY,lt=Number.NEGATIVE_INFINITY,Ft=Number.NEGATIVE_INFINITY,xt=!0,Vt=!1,Dt=void 0;try{for(var Nt=ot[Symbol.iterator](),$t;!(xt=($t=Nt.next()).done);xt=!0){var Rt=$t.value,Xt=void 0;W=="horizontal"?Xt=y.has(Rt)?p[y.get(Rt)]:$.get(Rt):Xt=y.has(Rt)?L[y.get(Rt)]:$.get(Rt);var zt=q.get(Rt);Xt<dt&&(dt=Xt),Xt>lt&&(lt=Xt),zt<at&&(at=zt),zt>Ft&&(Ft=zt)}}catch(_t){Vt=!0,Dt=_t}finally{try{!xt&&Nt.return&&Nt.return()}finally{if(Vt)throw Dt}}var de=(dt+lt)/2-(at+Ft)/2,qt=!0,Jt=!1,Kt=void 0;try{for(var Qt=ot[Symbol.iterator](),he;!(qt=(he=Qt.next()).done);qt=!0){var jt=he.value;q.set(jt,q.get(jt)+de)}}catch(_t){Jt=!0,Kt=_t}finally{try{!qt&&Qt.return&&Qt.return()}finally{if(Jt)throw Kt}}})}return q},k=function(H){var W=0,z=0,$=0,K=0;if(H.forEach(function(ht){ht.left?p[y.get(ht.left)]-p[y.get(ht.right)]>=0?W++:z++:L[y.get(ht.top)]-L[y.get(ht.bottom)]>=0?$++:K++}),W>z&&$>K)for(var ut=0;ut<y.size;ut++)p[ut]=-1*p[ut],L[ut]=-1*L[ut];else if(W>z)for(var ft=0;ft<y.size;ft++)p[ft]=-1*p[ft];else if($>K)for(var q=0;q<y.size;q++)L[q]=-1*L[q]},s=function(H){var W=[],z=new g,$=new Set,K=0;return H.forEach(function(ut,ft){if(!$.has(ft)){W[K]=[];var q=ft;for(z.push(q),$.add(q),W[K].push(q);z.length!=0;){q=z.shift();var ht=H.get(q);ht.forEach(function(gt){$.has(gt.id)||(z.push(gt.id),$.add(gt.id),W[K].push(gt.id))})}K++}}),W},E=function(H){var W=new Map;return H.forEach(function(z,$){W.set($,[])}),H.forEach(function(z,$){z.forEach(function(K){W.get($).push(K),W.get(K.id).push({id:$,gap:K.gap,direction:K.direction})})}),W},v=function(H){var W=new Map;return H.forEach(function(z,$){W.set($,[])}),H.forEach(function(z,$){z.forEach(function(K){W.get(K.id).push({id:$,gap:K.gap,direction:K.direction})})}),W},m=[],d=[],D=!1,O=!1,P=new Set,F=new Map,I=new Map,Z=[];if(l.fixedNodeConstraint&&l.fixedNodeConstraint.forEach(function(G){P.add(G.nodeId)}),l.relativePlacementConstraint&&(l.relativePlacementConstraint.forEach(function(G){G.left?(F.has(G.left)?F.get(G.left).push({id:G.right,gap:G.gap,direction:"horizontal"}):F.set(G.left,[{id:G.right,gap:G.gap,direction:"horizontal"}]),F.has(G.right)||F.set(G.right,[])):(F.has(G.top)?F.get(G.top).push({id:G.bottom,gap:G.gap,direction:"vertical"}):F.set(G.top,[{id:G.bottom,gap:G.gap,direction:"vertical"}]),F.has(G.bottom)||F.set(G.bottom,[]))}),I=E(F),Z=s(I)),t.TRANSFORM_ON_CONSTRAINT_HANDLING){if(l.fixedNodeConstraint&&l.fixedNodeConstraint.length>1)l.fixedNodeConstraint.forEach(function(G,H){m[H]=[G.position.x,G.position.y],d[H]=[p[y.get(G.nodeId)],L[y.get(G.nodeId)]]}),D=!0;else if(l.alignmentConstraint)(function(){var G=0;if(l.alignmentConstraint.vertical){for(var H=l.alignmentConstraint.vertical,W=function(q){var ht=new Set;H[q].forEach(function(vt){ht.add(vt)});var gt=new Set([].concat(f(ht)).filter(function(vt){return P.has(vt)})),rt=void 0;gt.size>0?rt=p[y.get(gt.values().next().value)]:rt=tt(ht).x,H[q].forEach(function(vt){m[G]=[rt,L[y.get(vt)]],d[G]=[p[y.get(vt)],L[y.get(vt)]],G++})},z=0;z<H.length;z++)W(z);D=!0}if(l.alignmentConstraint.horizontal){for(var $=l.alignmentConstraint.horizontal,K=function(q){var ht=new Set;$[q].forEach(function(vt){ht.add(vt)});var gt=new Set([].concat(f(ht)).filter(function(vt){return P.has(vt)})),rt=void 0;gt.size>0?rt=p[y.get(gt.values().next().value)]:rt=tt(ht).y,$[q].forEach(function(vt){m[G]=[p[y.get(vt)],rt],d[G]=[p[y.get(vt)],L[y.get(vt)]],G++})},ut=0;ut<$.length;ut++)K(ut);D=!0}l.relativePlacementConstraint&&(O=!0)})();else if(l.relativePlacementConstraint){for(var _=0,b=0,j=0;j<Z.length;j++)Z[j].length>_&&(_=Z[j].length,b=j);if(_<I.size/2)k(l.relativePlacementConstraint),D=!1,O=!1;else{var V=new Map,w=new Map,U=[];Z[b].forEach(function(G){F.get(G).forEach(function(H){H.direction=="horizontal"?(V.has(G)?V.get(G).push(H):V.set(G,[H]),V.has(H.id)||V.set(H.id,[]),U.push({left:G,right:H.id})):(w.has(G)?w.get(G).push(H):w.set(G,[H]),w.has(H.id)||w.set(H.id,[]),U.push({top:G,bottom:H.id}))})}),k(U),O=!1;var X=x(V,"horizontal"),J=x(w,"vertical");Z[b].forEach(function(G,H){d[H]=[p[y.get(G)],L[y.get(G)]],m[H]=[],X.has(G)?m[H][0]=X.get(G):m[H][0]=p[y.get(G)],J.has(G)?m[H][1]=J.get(G):m[H][1]=L[y.get(G)]}),D=!0}}if(D){for(var st=void 0,Lt=i.transpose(m),St=i.transpose(d),Q=0;Q<Lt.length;Q++)Lt[Q]=i.multGamma(Lt[Q]),St[Q]=i.multGamma(St[Q]);var Ut=i.multMat(Lt,i.transpose(St)),wt=e.svd(Ut);st=i.multMat(wt.V,i.transpose(wt.U));for(var nt=0;nt<y.size;nt++){var et=[p[nt],L[nt]],pt=[st[0][0],st[1][0]],Et=[st[0][1],st[1][1]];p[nt]=i.dotProduct(et,pt),L[nt]=i.dotProduct(et,Et)}O&&k(l.relativePlacementConstraint)}}if(t.ENFORCE_CONSTRAINTS){if(l.fixedNodeConstraint&&l.fixedNodeConstraint.length>0){var Ct={x:0,y:0};l.fixedNodeConstraint.forEach(function(G,H){var W={x:p[y.get(G.nodeId)],y:L[y.get(G.nodeId)]},z=G.position,$=Y(z,W);Ct.x+=$.x,Ct.y+=$.y}),Ct.x/=l.fixedNodeConstraint.length,Ct.y/=l.fixedNodeConstraint.length,p.forEach(function(G,H){p[H]+=Ct.x}),L.forEach(function(G,H){L[H]+=Ct.y}),l.fixedNodeConstraint.forEach(function(G){p[y.get(G.nodeId)]=G.position.x,L[y.get(G.nodeId)]=G.position.y})}if(l.alignmentConstraint){if(l.alignmentConstraint.vertical)for(var mt=l.alignmentConstraint.vertical,Tt=function(H){var W=new Set;mt[H].forEach(function(K){W.add(K)});var z=new Set([].concat(f(W)).filter(function(K){return P.has(K)})),$=void 0;z.size>0?$=p[y.get(z.values().next().value)]:$=tt(W).x,W.forEach(function(K){P.has(K)||(p[y.get(K)]=$)})},Ot=0;Ot<mt.length;Ot++)Tt(Ot);if(l.alignmentConstraint.horizontal)for(var It=l.alignmentConstraint.horizontal,Wt=function(H){var W=new Set;It[H].forEach(function(K){W.add(K)});var z=new Set([].concat(f(W)).filter(function(K){return P.has(K)})),$=void 0;z.size>0?$=L[y.get(z.values().next().value)]:$=tt(W).y,W.forEach(function(K){P.has(K)||(L[y.get(K)]=$)})},Pt=0;Pt<It.length;Pt++)Wt(Pt)}l.relativePlacementConstraint&&(function(){var G=new Map,H=new Map,W=new Map,z=new Map,$=new Map,K=new Map,ut=new Set,ft=new Set;if(P.forEach(function(Gt){ut.add(Gt),ft.add(Gt)}),l.alignmentConstraint){if(l.alignmentConstraint.vertical)for(var q=l.alignmentConstraint.vertical,ht=function(yt){W.set("dummy"+yt,[]),q[yt].forEach(function(Mt){G.set(Mt,"dummy"+yt),W.get("dummy"+yt).push(Mt),P.has(Mt)&&ut.add("dummy"+yt)}),$.set("dummy"+yt,p[y.get(q[yt][0])])},gt=0;gt<q.length;gt++)ht(gt);if(l.alignmentConstraint.horizontal)for(var rt=l.alignmentConstraint.horizontal,vt=function(yt){z.set("dummy"+yt,[]),rt[yt].forEach(function(Mt){H.set(Mt,"dummy"+yt),z.get("dummy"+yt).push(Mt),P.has(Mt)&&ft.add("dummy"+yt)}),K.set("dummy"+yt,L[y.get(rt[yt][0])])},At=0;At<rt.length;At++)vt(At)}var ot=new Map,it=new Map,dt=function(yt){F.get(yt).forEach(function(Mt){var Zt=void 0,Bt=void 0;Mt.direction=="horizontal"?(Zt=G.get(yt)?G.get(yt):yt,G.get(Mt.id)?Bt={id:G.get(Mt.id),gap:Mt.gap,direction:Mt.direction}:Bt=Mt,ot.has(Zt)?ot.get(Zt).push(Bt):ot.set(Zt,[Bt]),ot.has(Bt.id)||ot.set(Bt.id,[])):(Zt=H.get(yt)?H.get(yt):yt,H.get(Mt.id)?Bt={id:H.get(Mt.id),gap:Mt.gap,direction:Mt.direction}:Bt=Mt,it.has(Zt)?it.get(Zt).push(Bt):it.set(Zt,[Bt]),it.has(Bt.id)||it.set(Bt.id,[]))})},at=!0,lt=!1,Ft=void 0;try{for(var xt=F.keys()[Symbol.iterator](),Vt;!(at=(Vt=xt.next()).done);at=!0){var Dt=Vt.value;dt(Dt)}}catch(Gt){lt=!0,Ft=Gt}finally{try{!at&&xt.return&&xt.return()}finally{if(lt)throw Ft}}var Nt=E(ot),$t=E(it),Rt=s(Nt),Xt=s($t),zt=v(ot),de=v(it),qt=[],Jt=[];Rt.forEach(function(Gt,yt){qt[yt]=[],Gt.forEach(function(Mt){zt.get(Mt).length==0&&qt[yt].push(Mt)})}),Xt.forEach(function(Gt,yt){Jt[yt]=[],Gt.forEach(function(Mt){de.get(Mt).length==0&&Jt[yt].push(Mt)})});var Kt=x(ot,"horizontal",ut,$,qt),Qt=x(it,"vertical",ft,K,Jt),he=function(yt){W.get(yt)?W.get(yt).forEach(function(Mt){p[y.get(Mt)]=Kt.get(yt)}):p[y.get(yt)]=Kt.get(yt)},jt=!0,_t=!1,xe=void 0;try{for(var ve=Kt.keys()[Symbol.iterator](),Ie;!(jt=(Ie=ve.next()).done);jt=!0){var pe=Ie.value;he(pe)}}catch(Gt){_t=!0,xe=Gt}finally{try{!jt&&ve.return&&ve.return()}finally{if(_t)throw xe}}var vr=function(yt){z.get(yt)?z.get(yt).forEach(function(Mt){L[y.get(Mt)]=Qt.get(yt)}):L[y.get(yt)]=Qt.get(yt)},ye=!0,Re=!1,Se=void 0;try{for(var Ee=Qt.keys()[Symbol.iterator](),Fe;!(ye=(Fe=Ee.next()).done);ye=!0){var pe=Fe.value;vr(pe)}}catch(Gt){Re=!0,Se=Gt}finally{try{!ye&&Ee.return&&Ee.return()}finally{if(Re)throw Se}}})()}for(var Yt=0;Yt<R.length;Yt++){var bt=R[Yt];bt.getChild()==null&&bt.setCenter(p[y.get(bt.id)],L[y.get(bt.id)])}},a.exports=h}),551:(a=>{a.exports=C})},T={};function u(a){var r=T[a];if(r!==void 0)return r.exports;var n=T[a]={exports:{}};return A[a](n,n.exports,u),n.exports}var o=u(45);return o})()})});var _e=me((oe,we)=>{"use strict";(function(A,T){typeof oe=="object"&&typeof we=="object"?we.exports=T(Me()):typeof define=="function"&&define.amd?define(["cose-base"],T):typeof oe=="object"?oe.cytoscapeFcose=T(Me()):A.cytoscapeFcose=T(A.coseBase)})(oe,function(C){return(()=>{"use strict";var A={658:(a=>{a.exports=Object.assign!=null?Object.assign.bind(Object):function(r){for(var n=arguments.length,f=Array(n>1?n-1:0),t=1;t<n;t++)f[t-1]=arguments[t];return f.forEach(function(g){Object.keys(g).forEach(function(i){return r[i]=g[i]})}),r}}),548:((a,r,n)=>{var f=(function(){function i(e,h){var c=[],l=!0,N=!1,y=void 0;try{for(var p=e[Symbol.iterator](),L;!(l=(L=p.next()).done)&&(c.push(L.value),!(h&&c.length===h));l=!0);}catch(R){N=!0,y=R}finally{try{!l&&p.return&&p.return()}finally{if(N)throw y}}return c}return function(e,h){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return i(e,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),t=n(140).layoutBase.LinkedList,g={};g.getTopMostNodes=function(i){for(var e={},h=0;h<i.length;h++)e[i[h].id()]=!0;var c=i.filter(function(l,N){typeof l=="number"&&(l=N);for(var y=l.parent()[0];y!=null;){if(e[y.id()])return!1;y=y.parent()[0]}return!0});return c},g.connectComponents=function(i,e,h,c){var l=new t,N=new Set,y=[],p=void 0,L=void 0,R=void 0,M=!1,S=1,B=[],Y=[],tt=function(){var k=i.collection();Y.push(k);var s=h[0],E=i.collection();E.merge(s).merge(s.descendants().intersection(e)),y.push(s),E.forEach(function(d){l.push(d),N.add(d),k.merge(d)});for(var v=function(){s=l.shift();var D=i.collection();s.neighborhood().nodes().forEach(function(I){e.intersection(s.edgesWith(I)).length>0&&D.merge(I)});for(var O=0;O<D.length;O++){var P=D[O];if(p=h.intersection(P.union(P.ancestors())),p!=null&&!N.has(p[0])){var F=p.union(p.descendants());F.forEach(function(I){l.push(I),N.add(I),k.merge(I),h.has(I)&&y.push(I)})}}};l.length!=0;)v();if(k.forEach(function(d){e.intersection(d.connectedEdges()).forEach(function(D){k.has(D.source())&&k.has(D.target())&&k.merge(D)})}),y.length==h.length&&(M=!0),!M||M&&S>1){L=y[0],R=L.connectedEdges().length,y.forEach(function(d){d.connectedEdges().length<R&&(R=d.connectedEdges().length,L=d)}),B.push(L.id());var m=i.collection();m.merge(y[0]),y.forEach(function(d){m.merge(d)}),y=[],h=h.difference(m),S++}};do tt();while(!M);return c&&B.length>0&&c.set("dummy"+(c.size+1),B),Y},g.relocateComponent=function(i,e,h){if(!h.fixedNodeConstraint){var c=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,N=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY;if(h.quality=="draft"){var p=!0,L=!1,R=void 0;try{for(var M=e.nodeIndexes[Symbol.iterator](),S;!(p=(S=M.next()).done);p=!0){var B=S.value,Y=f(B,2),tt=Y[0],x=Y[1],k=h.cy.getElementById(tt);if(k){var s=k.boundingBox(),E=e.xCoords[x]-s.w/2,v=e.xCoords[x]+s.w/2,m=e.yCoords[x]-s.h/2,d=e.yCoords[x]+s.h/2;E<c&&(c=E),v>l&&(l=v),m<N&&(N=m),d>y&&(y=d)}}}catch(I){L=!0,R=I}finally{try{!p&&M.return&&M.return()}finally{if(L)throw R}}var D=i.x-(l+c)/2,O=i.y-(y+N)/2;e.xCoords=e.xCoords.map(function(I){return I+D}),e.yCoords=e.yCoords.map(function(I){return I+O})}else{Object.keys(e).forEach(function(I){var Z=e[I],_=Z.getRect().x,b=Z.getRect().x+Z.getRect().width,j=Z.getRect().y,V=Z.getRect().y+Z.getRect().height;_<c&&(c=_),b>l&&(l=b),j<N&&(N=j),V>y&&(y=V)});var P=i.x-(l+c)/2,F=i.y-(y+N)/2;Object.keys(e).forEach(function(I){var Z=e[I];Z.setCenter(Z.getCenterX()+P,Z.getCenterY()+F)})}}},g.calcBoundingBox=function(i,e,h,c){for(var l=Number.MAX_SAFE_INTEGER,N=Number.MIN_SAFE_INTEGER,y=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER,L=void 0,R=void 0,M=void 0,S=void 0,B=i.descendants().not(":parent"),Y=B.length,tt=0;tt<Y;tt++){var x=B[tt];L=e[c.get(x.id())]-x.width()/2,R=e[c.get(x.id())]+x.width()/2,M=h[c.get(x.id())]-x.height()/2,S=h[c.get(x.id())]+x.height()/2,l>L&&(l=L),N<R&&(N=R),y>M&&(y=M),p<S&&(p=S)}var k={};return k.topLeftX=l,k.topLeftY=y,k.width=N-l,k.height=p-y,k},g.calcParentsWithoutChildren=function(i,e){var h=i.collection();return e.nodes(":parent").forEach(function(c){var l=!1;c.children().forEach(function(N){N.css("display")!="none"&&(l=!0)}),l||h.merge(c)}),h},a.exports=g}),816:((a,r,n)=>{var f=n(548),t=n(140).CoSELayout,g=n(140).CoSENode,i=n(140).layoutBase.PointD,e=n(140).layoutBase.DimensionD,h=n(140).layoutBase.LayoutConstants,c=n(140).layoutBase.FDLayoutConstants,l=n(140).CoSEConstants,N=function(p,L){var R=p.cy,M=p.eles,S=M.nodes(),B=M.edges(),Y=void 0,tt=void 0,x=void 0,k={};p.randomize&&(Y=L.nodeIndexes,tt=L.xCoords,x=L.yCoords);var s=function(I){return typeof I=="function"},E=function(I,Z){return s(I)?I(Z):I},v=f.calcParentsWithoutChildren(R,M),m=function F(I,Z,_,b){for(var j=Z.length,V=0;V<j;V++){var w=Z[V],U=null;w.intersection(v).length==0&&(U=w.children());var X=void 0,J=w.layoutDimensions({nodeDimensionsIncludeLabels:b.nodeDimensionsIncludeLabels});if(w.outerWidth()!=null&&w.outerHeight()!=null)if(b.randomize)if(!w.isParent())X=I.add(new g(_.graphManager,new i(tt[Y.get(w.id())]-J.w/2,x[Y.get(w.id())]-J.h/2),new e(parseFloat(J.w),parseFloat(J.h))));else{var st=f.calcBoundingBox(w,tt,x,Y);w.intersection(v).length==0?X=I.add(new g(_.graphManager,new i(st.topLeftX,st.topLeftY),new e(st.width,st.height))):X=I.add(new g(_.graphManager,new i(st.topLeftX,st.topLeftY),new e(parseFloat(J.w),parseFloat(J.h))))}else X=I.add(new g(_.graphManager,new i(w.position("x")-J.w/2,w.position("y")-J.h/2),new e(parseFloat(J.w),parseFloat(J.h))));else X=I.add(new g(this.graphManager));if(X.id=w.data("id"),X.nodeRepulsion=E(b.nodeRepulsion,w),X.paddingLeft=parseInt(w.css("padding")),X.paddingTop=parseInt(w.css("padding")),X.paddingRight=parseInt(w.css("padding")),X.paddingBottom=parseInt(w.css("padding")),b.nodeDimensionsIncludeLabels&&(X.labelWidth=w.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,X.labelHeight=w.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,X.labelPosVertical=w.css("text-valign"),X.labelPosHorizontal=w.css("text-halign")),k[w.data("id")]=X,isNaN(X.rect.x)&&(X.rect.x=0),isNaN(X.rect.y)&&(X.rect.y=0),U!=null&&U.length>0){var Lt=void 0;Lt=_.getGraphManager().add(_.newGraph(),X),F(Lt,U,_,b)}}},d=function(I,Z,_){for(var b=0,j=0,V=0;V<_.length;V++){var w=_[V],U=k[w.data("source")],X=k[w.data("target")];if(U&&X&&U!==X&&U.getEdgesBetween(X).length==0){var J=Z.add(I.newEdge(),U,X);J.id=w.id(),J.idealLength=E(p.idealEdgeLength,w),J.edgeElasticity=E(p.edgeElasticity,w),b+=J.idealLength,j++}}p.idealEdgeLength!=null&&(j>0?l.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=b/j:s(p.idealEdgeLength)?l.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=50:l.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=p.idealEdgeLength,l.MIN_REPULSION_DIST=c.MIN_REPULSION_DIST=c.DEFAULT_EDGE_LENGTH/10,l.DEFAULT_RADIAL_SEPARATION=c.DEFAULT_EDGE_LENGTH)},D=function(I,Z){Z.fixedNodeConstraint&&(I.constraints.fixedNodeConstraint=Z.fixedNodeConstraint),Z.alignmentConstraint&&(I.constraints.alignmentConstraint=Z.alignmentConstraint),Z.relativePlacementConstraint&&(I.constraints.relativePlacementConstraint=Z.relativePlacementConstraint)};p.nestingFactor!=null&&(l.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=c.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=p.nestingFactor),p.gravity!=null&&(l.DEFAULT_GRAVITY_STRENGTH=c.DEFAULT_GRAVITY_STRENGTH=p.gravity),p.numIter!=null&&(l.MAX_ITERATIONS=c.MAX_ITERATIONS=p.numIter),p.gravityRange!=null&&(l.DEFAULT_GRAVITY_RANGE_FACTOR=c.DEFAULT_GRAVITY_RANGE_FACTOR=p.gravityRange),p.gravityCompound!=null&&(l.DEFAULT_COMPOUND_GRAVITY_STRENGTH=c.DEFAULT_COMPOUND_GRAVITY_STRENGTH=p.gravityCompound),p.gravityRangeCompound!=null&&(l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=p.gravityRangeCompound),p.initialEnergyOnIncremental!=null&&(l.DEFAULT_COOLING_FACTOR_INCREMENTAL=c.DEFAULT_COOLING_FACTOR_INCREMENTAL=p.initialEnergyOnIncremental),p.tilingCompareBy!=null&&(l.TILING_COMPARE_BY=p.tilingCompareBy),p.quality=="proof"?h.QUALITY=2:h.QUALITY=0,l.NODE_DIMENSIONS_INCLUDE_LABELS=c.NODE_DIMENSIONS_INCLUDE_LABELS=h.NODE_DIMENSIONS_INCLUDE_LABELS=p.nodeDimensionsIncludeLabels,l.DEFAULT_INCREMENTAL=c.DEFAULT_INCREMENTAL=h.DEFAULT_INCREMENTAL=!p.randomize,l.ANIMATE=c.ANIMATE=h.ANIMATE=p.animate,l.TILE=p.tile,l.TILING_PADDING_VERTICAL=typeof p.tilingPaddingVertical=="function"?p.tilingPaddingVertical.call():p.tilingPaddingVertical,l.TILING_PADDING_HORIZONTAL=typeof p.tilingPaddingHorizontal=="function"?p.tilingPaddingHorizontal.call():p.tilingPaddingHorizontal,l.DEFAULT_INCREMENTAL=c.DEFAULT_INCREMENTAL=h.DEFAULT_INCREMENTAL=!0,l.PURE_INCREMENTAL=!p.randomize,h.DEFAULT_UNIFORM_LEAF_NODE_SIZES=p.uniformNodeDimensions,p.step=="transformed"&&(l.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,l.ENFORCE_CONSTRAINTS=!1,l.APPLY_LAYOUT=!1),p.step=="enforced"&&(l.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,l.ENFORCE_CONSTRAINTS=!0,l.APPLY_LAYOUT=!1),p.step=="cose"&&(l.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,l.ENFORCE_CONSTRAINTS=!1,l.APPLY_LAYOUT=!0),p.step=="all"&&(p.randomize?l.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:l.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,l.ENFORCE_CONSTRAINTS=!0,l.APPLY_LAYOUT=!0),p.fixedNodeConstraint||p.alignmentConstraint||p.relativePlacementConstraint?l.TREE_REDUCTION_ON_INCREMENTAL=!1:l.TREE_REDUCTION_ON_INCREMENTAL=!0;var O=new t,P=O.newGraphManager();return m(P.addRoot(),f.getTopMostNodes(S),O,p),d(O,P,B),D(O,p),O.runLayout(),k};a.exports={coseLayout:N}}),212:((a,r,n)=>{var f=(function(){function p(L,R){for(var M=0;M<R.length;M++){var S=R[M];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(L,S.key,S)}}return function(L,R,M){return R&&p(L.prototype,R),M&&p(L,M),L}})();function t(p,L){if(!(p instanceof L))throw new TypeError("Cannot call a class as a function")}var g=n(658),i=n(548),e=n(657),h=e.spectralLayout,c=n(816),l=c.coseLayout,N=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(L){return 4500},idealEdgeLength:function(L){return 50},edgeElasticity:function(L){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),y=(function(){function p(L){t(this,p),this.options=g({},N,L)}return f(p,[{key:"run",value:function(){var R=this,M=this.options,S=M.cy,B=M.eles,Y=[],tt=void 0,x=void 0,k=[],s=void 0,E=[];M.fixedNodeConstraint&&(!Array.isArray(M.fixedNodeConstraint)||M.fixedNodeConstraint.length==0)&&(M.fixedNodeConstraint=void 0),M.alignmentConstraint&&(M.alignmentConstraint.vertical&&(!Array.isArray(M.alignmentConstraint.vertical)||M.alignmentConstraint.vertical.length==0)&&(M.alignmentConstraint.vertical=void 0),M.alignmentConstraint.horizontal&&(!Array.isArray(M.alignmentConstraint.horizontal)||M.alignmentConstraint.horizontal.length==0)&&(M.alignmentConstraint.horizontal=void 0)),M.relativePlacementConstraint&&(!Array.isArray(M.relativePlacementConstraint)||M.relativePlacementConstraint.length==0)&&(M.relativePlacementConstraint=void 0);var v=M.fixedNodeConstraint||M.alignmentConstraint||M.relativePlacementConstraint;v&&(M.tile=!1,M.packComponents=!1);var m=void 0,d=!1;if(S.layoutUtilities&&M.packComponents&&(m=S.layoutUtilities("get"),m||(m=S.layoutUtilities()),d=!0),B.nodes().length>0)if(d){var P=i.getTopMostNodes(M.eles.nodes());if(s=i.connectComponents(S,M.eles,P),s.forEach(function(nt){var et=nt.boundingBox();E.push({x:et.x1+et.w/2,y:et.y1+et.h/2})}),M.randomize&&s.forEach(function(nt){M.eles=nt,Y.push(h(M))}),M.quality=="default"||M.quality=="proof"){var F=S.collection();if(M.tile){var I=new Map,Z=[],_=[],b=0,j={nodeIndexes:I,xCoords:Z,yCoords:_},V=[];if(s.forEach(function(nt,et){nt.edges().length==0&&(nt.nodes().forEach(function(pt,Et){F.merge(nt.nodes()[Et]),pt.isParent()||(j.nodeIndexes.set(nt.nodes()[Et].id(),b++),j.xCoords.push(nt.nodes()[0].position().x),j.yCoords.push(nt.nodes()[0].position().y))}),V.push(et))}),F.length>1){var w=F.boundingBox();E.push({x:w.x1+w.w/2,y:w.y1+w.h/2}),s.push(F),Y.push(j);for(var U=V.length-1;U>=0;U--)s.splice(V[U],1),Y.splice(V[U],1),E.splice(V[U],1)}}s.forEach(function(nt,et){M.eles=nt,k.push(l(M,Y[et])),i.relocateComponent(E[et],k[et],M)})}else s.forEach(function(nt,et){i.relocateComponent(E[et],Y[et],M)});var X=new Set;if(s.length>1){var J=[],st=B.filter(function(nt){return nt.css("display")=="none"});s.forEach(function(nt,et){var pt=void 0;if(M.quality=="draft"&&(pt=Y[et].nodeIndexes),nt.nodes().not(st).length>0){var Et={};Et.edges=[],Et.nodes=[];var Ct=void 0;nt.nodes().not(st).forEach(function(mt){if(M.quality=="draft")if(!mt.isParent())Ct=pt.get(mt.id()),Et.nodes.push({x:Y[et].xCoords[Ct]-mt.boundingbox().w/2,y:Y[et].yCoords[Ct]-mt.boundingbox().h/2,width:mt.boundingbox().w,height:mt.boundingbox().h});else{var Tt=i.calcBoundingBox(mt,Y[et].xCoords,Y[et].yCoords,pt);Et.nodes.push({x:Tt.topLeftX,y:Tt.topLeftY,width:Tt.width,height:Tt.height})}else k[et][mt.id()]&&Et.nodes.push({x:k[et][mt.id()].getLeft(),y:k[et][mt.id()].getTop(),width:k[et][mt.id()].getWidth(),height:k[et][mt.id()].getHeight()})}),nt.edges().forEach(function(mt){var Tt=mt.source(),Ot=mt.target();if(Tt.css("display")!="none"&&Ot.css("display")!="none")if(M.quality=="draft"){var It=pt.get(Tt.id()),Wt=pt.get(Ot.id()),Pt=[],Yt=[];if(Tt.isParent()){var bt=i.calcBoundingBox(Tt,Y[et].xCoords,Y[et].yCoords,pt);Pt.push(bt.topLeftX+bt.width/2),Pt.push(bt.topLeftY+bt.height/2)}else Pt.push(Y[et].xCoords[It]),Pt.push(Y[et].yCoords[It]);if(Ot.isParent()){var G=i.calcBoundingBox(Ot,Y[et].xCoords,Y[et].yCoords,pt);Yt.push(G.topLeftX+G.width/2),Yt.push(G.topLeftY+G.height/2)}else Yt.push(Y[et].xCoords[Wt]),Yt.push(Y[et].yCoords[Wt]);Et.edges.push({startX:Pt[0],startY:Pt[1],endX:Yt[0],endY:Yt[1]})}else k[et][Tt.id()]&&k[et][Ot.id()]&&Et.edges.push({startX:k[et][Tt.id()].getCenterX(),startY:k[et][Tt.id()].getCenterY(),endX:k[et][Ot.id()].getCenterX(),endY:k[et][Ot.id()].getCenterY()})}),Et.nodes.length>0&&(J.push(Et),X.add(et))}});var Lt=m.packComponents(J,M.randomize).shifts;if(M.quality=="draft")Y.forEach(function(nt,et){var pt=nt.xCoords.map(function(Ct){return Ct+Lt[et].dx}),Et=nt.yCoords.map(function(Ct){return Ct+Lt[et].dy});nt.xCoords=pt,nt.yCoords=Et});else{var St=0;X.forEach(function(nt){Object.keys(k[nt]).forEach(function(et){var pt=k[nt][et];pt.setCenter(pt.getCenterX()+Lt[St].dx,pt.getCenterY()+Lt[St].dy)}),St++})}}}else{var D=M.eles.boundingBox();if(E.push({x:D.x1+D.w/2,y:D.y1+D.h/2}),M.randomize){var O=h(M);Y.push(O)}M.quality=="default"||M.quality=="proof"?(k.push(l(M,Y[0])),i.relocateComponent(E[0],k[0],M)):i.relocateComponent(E[0],Y[0],M)}var Q=function(et,pt){if(M.quality=="default"||M.quality=="proof"){typeof et=="number"&&(et=pt);var Et=void 0,Ct=void 0,mt=et.data("id");return k.forEach(function(Ot){mt in Ot&&(Et={x:Ot[mt].getRect().getCenterX(),y:Ot[mt].getRect().getCenterY()},Ct=Ot[mt])}),M.nodeDimensionsIncludeLabels&&(Ct.labelWidth&&(Ct.labelPosHorizontal=="left"?Et.x+=Ct.labelWidth/2:Ct.labelPosHorizontal=="right"&&(Et.x-=Ct.labelWidth/2)),Ct.labelHeight&&(Ct.labelPosVertical=="top"?Et.y+=Ct.labelHeight/2:Ct.labelPosVertical=="bottom"&&(Et.y-=Ct.labelHeight/2))),Et==null&&(Et={x:et.position("x"),y:et.position("y")}),{x:Et.x,y:Et.y}}else{var Tt=void 0;return Y.forEach(function(Ot){var It=Ot.nodeIndexes.get(et.id());It!=null&&(Tt={x:Ot.xCoords[It],y:Ot.yCoords[It]})}),Tt==null&&(Tt={x:et.position("x"),y:et.position("y")}),{x:Tt.x,y:Tt.y}}};if(M.quality=="default"||M.quality=="proof"||M.randomize){var Ut=i.calcParentsWithoutChildren(S,B),wt=B.filter(function(nt){return nt.css("display")=="none"});M.eles=B.not(wt),B.nodes().not(":parent").not(wt).layoutPositions(R,M,Q),Ut.length>0&&Ut.forEach(function(nt){nt.position(Q(nt))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),p})();a.exports=y}),657:((a,r,n)=>{var f=n(548),t=n(140).layoutBase.Matrix,g=n(140).layoutBase.SVD,i=function(h){var c=h.cy,l=h.eles,N=l.nodes(),y=l.nodes(":parent"),p=new Map,L=new Map,R=new Map,M=[],S=[],B=[],Y=[],tt=[],x=[],k=[],s=[],E=void 0,v=void 0,m=1e8,d=1e-9,D=h.piTol,O=h.samplingType,P=h.nodeSeparation,F=void 0,I=function(){for(var W=0,z=0,$=!1;z<F;){W=Math.floor(Math.random()*v),$=!1;for(var K=0;K<z;K++)if(Y[K]==W){$=!0;break}if(!$)Y[z]=W,z++;else continue}},Z=function(W,z,$){for(var K=[],ut=0,ft=0,q=0,ht=void 0,gt=[],rt=0,vt=1,At=0;At<v;At++)gt[At]=m;for(K[ft]=W,gt[W]=0;ft>=ut;){q=K[ut++];for(var ot=M[q],it=0;it<ot.length;it++)ht=L.get(ot[it]),gt[ht]==m&&(gt[ht]=gt[q]+1,K[++ft]=ht);x[q][z]=gt[q]*P}if($){for(var dt=0;dt<v;dt++)x[dt][z]<tt[dt]&&(tt[dt]=x[dt][z]);for(var at=0;at<v;at++)tt[at]>rt&&(rt=tt[at],vt=at)}return vt},_=function(W){var z=void 0;if(W){z=Math.floor(Math.random()*v),E=z;for(var K=0;K<v;K++)tt[K]=m;for(var ut=0;ut<F;ut++)Y[ut]=z,z=Z(z,ut,W)}else{I();for(var $=0;$<F;$++)Z(Y[$],$,W,!1)}for(var ft=0;ft<v;ft++)for(var q=0;q<F;q++)x[ft][q]*=x[ft][q];for(var ht=0;ht<F;ht++)k[ht]=[];for(var gt=0;gt<F;gt++)for(var rt=0;rt<F;rt++)k[gt][rt]=x[Y[rt]][gt]},b=function(){for(var W=g.svd(k),z=W.S,$=W.U,K=W.V,ut=z[0]*z[0]*z[0],ft=[],q=0;q<F;q++){ft[q]=[];for(var ht=0;ht<F;ht++)ft[q][ht]=0,q==ht&&(ft[q][ht]=z[q]/(z[q]*z[q]+ut/(z[q]*z[q])))}s=t.multMat(t.multMat(K,ft),t.transpose($))},j=function(){for(var W=void 0,z=void 0,$=[],K=[],ut=[],ft=[],q=0;q<v;q++)$[q]=Math.random(),K[q]=Math.random();$=t.normalize($),K=t.normalize(K);for(var ht=0,gt=d,rt=d,vt=void 0;;){ht++;for(var At=0;At<v;At++)ut[At]=$[At];if($=t.multGamma(t.multL(t.multGamma(ut),x,s)),W=t.dotProduct(ut,$),$=t.normalize($),gt=t.dotProduct(ut,$),vt=Math.abs(gt/rt),vt<=1+D&&vt>=1)break;rt=gt}for(var ot=0;ot<v;ot++)ut[ot]=$[ot];for(ht=0,rt=d;;){ht++;for(var it=0;it<v;it++)ft[it]=K[it];if(ft=t.minusOp(ft,t.multCons(ut,t.dotProduct(ut,ft))),K=t.multGamma(t.multL(t.multGamma(ft),x,s)),z=t.dotProduct(ft,K),K=t.normalize(K),gt=t.dotProduct(ft,K),vt=Math.abs(gt/rt),vt<=1+D&&vt>=1)break;rt=gt}for(var dt=0;dt<v;dt++)ft[dt]=K[dt];S=t.multCons(ut,Math.sqrt(Math.abs(W))),B=t.multCons(ft,Math.sqrt(Math.abs(z)))};f.connectComponents(c,l,f.getTopMostNodes(N),p),y.forEach(function(H){f.connectComponents(c,l,f.getTopMostNodes(H.descendants().intersection(l)),p)});for(var V=0,w=0;w<N.length;w++)N[w].isParent()||L.set(N[w].id(),V++);var U=!0,X=!1,J=void 0;try{for(var st=p.keys()[Symbol.iterator](),Lt;!(U=(Lt=st.next()).done);U=!0){var St=Lt.value;L.set(St,V++)}}catch(H){X=!0,J=H}finally{try{!U&&st.return&&st.return()}finally{if(X)throw J}}for(var Q=0;Q<L.size;Q++)M[Q]=[];y.forEach(function(H){for(var W=H.children().intersection(l);W.nodes(":childless").length==0;)W=W.nodes()[0].children().intersection(l);var z=0,$=W.nodes(":childless")[0].connectedEdges().length;W.nodes(":childless").forEach(function(K,ut){K.connectedEdges().length<$&&($=K.connectedEdges().length,z=ut)}),R.set(H.id(),W.nodes(":childless")[z].id())}),N.forEach(function(H){var W=void 0;H.isParent()?W=L.get(R.get(H.id())):W=L.get(H.id()),H.neighborhood().nodes().forEach(function(z){l.intersection(H.edgesWith(z)).length>0&&(z.isParent()?M[W].push(R.get(z.id())):M[W].push(z.id()))})});var Ut=function(W){var z=L.get(W),$=void 0;p.get(W).forEach(function(K){c.getElementById(K).isParent()?$=R.get(K):$=K,M[z].push($),M[L.get($)].push(W)})},wt=!0,nt=!1,et=void 0;try{for(var pt=p.keys()[Symbol.iterator](),Et;!(wt=(Et=pt.next()).done);wt=!0){var Ct=Et.value;Ut(Ct)}}catch(H){nt=!0,et=H}finally{try{!wt&&pt.return&&pt.return()}finally{if(nt)throw et}}v=L.size;var mt=void 0;if(v>2){F=v<h.sampleSize?v:h.sampleSize;for(var Tt=0;Tt<v;Tt++)x[Tt]=[];for(var Ot=0;Ot<F;Ot++)s[Ot]=[];return h.quality=="draft"||h.step=="all"?(_(O),b(),j(),mt={nodeIndexes:L,xCoords:S,yCoords:B}):(L.forEach(function(H,W){S.push(c.getElementById(W).position("x")),B.push(c.getElementById(W).position("y"))}),mt={nodeIndexes:L,xCoords:S,yCoords:B}),mt}else{var It=L.keys(),Wt=c.getElementById(It.next().value),Pt=Wt.position(),Yt=Wt.outerWidth();if(S.push(Pt.x),B.push(Pt.y),v==2){var bt=c.getElementById(It.next().value),G=bt.outerWidth();S.push(Pt.x+Yt/2+G/2+h.idealEdgeLength),B.push(Pt.y)}return mt={nodeIndexes:L,xCoords:S,yCoords:B},mt}};a.exports={spectralLayout:i}}),579:((a,r,n)=>{var f=n(212),t=function(i){i&&i("layout","fcose",f)};typeof cytoscape<"u"&&t(cytoscape),a.exports=t}),140:(a=>{a.exports=C})},T={};function u(a){var r=T[a];if(r!==void 0)return r.exports;var n=T[a]={exports:{}};return A[a](n,n.exports,u),n.exports}var o=u(579);return o})()})});var or=pr(_e(),1);var tr={L:"left",R:"right",T:"top",B:"bottom"},er={L:ct(C=>`${C},${C/2} 0,${C} 0,0`,"L"),R:ct(C=>`0,${C/2} ${C},0 ${C},${C}`,"R"),T:ct(C=>`0,0 ${C},0 ${C/2},${C}`,"T"),B:ct(C=>`${C/2},0 ${C},${C} 0,${C}`,"B")},ue={L:ct((C,A)=>C-A+2,"L"),R:ct((C,A)=>C-2,"R"),T:ct((C,A)=>C-A+2,"T"),B:ct((C,A)=>C-2,"B")},yr=ct(function(C){return Ht(C)?C==="L"?"R":"L":C==="T"?"B":"T"},"getOppositeArchitectureDirection"),rr=ct(function(C){let A=C;return A==="L"||A==="R"||A==="T"||A==="B"},"isArchitectureDirection"),Ht=ct(function(C){let A=C;return A==="L"||A==="R"},"isArchitectureDirectionX"),kt=ct(function(C){let A=C;return A==="T"||A==="B"},"isArchitectureDirectionY"),De=ct(function(C,A){let T=Ht(C)&&kt(A),u=kt(C)&&Ht(A);return T||u},"isArchitectureDirectionXY"),Er=ct(function(C){let A=C[0],T=C[1],u=Ht(A)&&kt(T),o=kt(A)&&Ht(T);return u||o},"isArchitecturePairXY"),mr=ct(function(C){return C!=="LL"&&C!=="RR"&&C!=="TT"&&C!=="BB"},"isValidArchitectureDirectionPair"),Oe=ct(function(C,A){let T=`${C}${A}`;return mr(T)?T:void 0},"getArchitectureDirectionPair"),Tr=ct(function([C,A],T){let u=T[0],o=T[1];return Ht(u)?kt(o)?[C+(u==="L"?-1:1),A+(o==="T"?1:-1)]:[C+(u==="L"?-1:1),A]:Ht(o)?[C+(o==="L"?1:-1),A+(u==="T"?1:-1)]:[C,A+(u==="T"?1:-1)]},"shiftPositionByArchitectureDirectionPair"),Nr=ct(function(C){return C==="LT"||C==="TL"?[1,1]:C==="BL"||C==="LB"?[1,-1]:C==="BR"||C==="RB"?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),Lr=ct(function(C,A){return De(C,A)?"bend":Ht(C)?"horizontal":"vertical"},"getArchitectureDirectionAlignment"),Cr=ct(function(C){return C.type==="service"},"isArchitectureService"),Ar=ct(function(C){return C.type==="junction"},"isArchitectureJunction"),ir=ct(C=>C.data(),"edgeData"),re=ct(C=>C.data(),"nodeData"),Mr=be.architecture,ie,ar=(ie=class{constructor(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.elements={},this.setAccTitle=Xe,this.getAccTitle=He,this.setDiagramTitle=ze,this.getDiagramTitle=Be,this.getAccDescription=Ve,this.setAccDescription=We,this.clear()}clear(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.dataStructures=void 0,this.elements={},Ye()}addService({id:A,icon:T,in:u,title:o,iconText:a}){if(this.registeredIds[A]!==void 0)throw new Error(`The service id [${A}] is already in use by another ${this.registeredIds[A]}`);if(u!==void 0){if(A===u)throw new Error(`The service [${A}] cannot be placed within itself`);if(this.registeredIds[u]===void 0)throw new Error(`The service [${A}]'s parent does not exist. Please make sure the parent is created before this service`);if(this.registeredIds[u]==="node")throw new Error(`The service [${A}]'s parent is not a group`)}this.registeredIds[A]="node",this.nodes[A]={id:A,type:"service",icon:T,iconText:a,title:o,edges:[],in:u}}getServices(){return Object.values(this.nodes).filter(Cr)}addJunction({id:A,in:T}){this.registeredIds[A]="node",this.nodes[A]={id:A,type:"junction",edges:[],in:T}}getJunctions(){return Object.values(this.nodes).filter(Ar)}getNodes(){return Object.values(this.nodes)}getNode(A){return this.nodes[A]??null}addGroup({id:A,icon:T,in:u,title:o}){if(this.registeredIds?.[A]!==void 0)throw new Error(`The group id [${A}] is already in use by another ${this.registeredIds[A]}`);if(u!==void 0){if(A===u)throw new Error(`The group [${A}] cannot be placed within itself`);if(this.registeredIds?.[u]===void 0)throw new Error(`The group [${A}]'s parent does not exist. Please make sure the parent is created before this group`);if(this.registeredIds?.[u]==="node")throw new Error(`The group [${A}]'s parent is not a group`)}this.registeredIds[A]="group",this.groups[A]={id:A,icon:T,title:o,in:u}}getGroups(){return Object.values(this.groups)}addEdge({lhsId:A,rhsId:T,lhsDir:u,rhsDir:o,lhsInto:a,rhsInto:r,lhsGroup:n,rhsGroup:f,title:t}){if(!rr(u))throw new Error(`Invalid direction given for left hand side of edge ${A}--${T}. Expected (L,R,T,B) got ${String(u)}`);if(!rr(o))throw new Error(`Invalid direction given for right hand side of edge ${A}--${T}. Expected (L,R,T,B) got ${String(o)}`);if(this.nodes[A]===void 0&&this.groups[A]===void 0)throw new Error(`The left-hand id [${A}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(this.nodes[T]===void 0&&this.groups[T]===void 0)throw new Error(`The right-hand id [${T}] does not yet exist. Please create the service/group before declaring an edge to it.`);let g=this.nodes[A].in,i=this.nodes[T].in;if(n&&g&&i&&g==i)throw new Error(`The left-hand id [${A}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(f&&g&&i&&g==i)throw new Error(`The right-hand id [${T}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);let e={lhsId:A,lhsDir:u,lhsInto:a,lhsGroup:n,rhsId:T,rhsDir:o,rhsInto:r,rhsGroup:f,title:t};this.edges.push(e),this.nodes[A]&&this.nodes[T]&&(this.nodes[A].edges.push(this.edges[this.edges.length-1]),this.nodes[T].edges.push(this.edges[this.edges.length-1]))}getEdges(){return this.edges}getDataStructures(){if(this.dataStructures===void 0){let A={},T=Object.entries(this.nodes).reduce((f,[t,g])=>(f[t]=g.edges.reduce((i,e)=>{let h=this.getNode(e.lhsId)?.in,c=this.getNode(e.rhsId)?.in;if(h&&c&&h!==c){let l=Lr(e.lhsDir,e.rhsDir);l!=="bend"&&(A[h]??={},A[h][c]=l,A[c]??={},A[c][h]=l)}if(e.lhsId===t){let l=Oe(e.lhsDir,e.rhsDir);l&&(i[l]=e.rhsId)}else{let l=Oe(e.rhsDir,e.lhsDir);l&&(i[l]=e.lhsId)}return i},{}),f),{}),u=Object.keys(T)[0],o={[u]:1},a=Object.keys(T).reduce((f,t)=>t===u?f:le(te({},f),{[t]:1}),{}),r=ct(f=>{let t={[f]:[0,0]},g=[f];for(;g.length>0;){let i=g.shift();if(i){o[i]=1,delete a[i];let e=T[i],[h,c]=t[i];Object.entries(e).forEach(([l,N])=>{o[N]||(t[N]=Tr([h,c],l),g.push(N))})}}return t},"BFS"),n=[r(u)];for(;Object.keys(a).length>0;)n.push(r(Object.keys(a)[0]));this.dataStructures={adjList:T,spatialMaps:n,groupAlignments:A}}return this.dataStructures}setElementForId(A,T){this.elements[A]=T}getElementById(A){return this.elements[A]}getConfig(){return ke(te(te({},Mr),Pe().architecture))}getConfigField(A){return this.getConfig()[A]}},ct(ie,"ArchitectureDB"),ie),wr=ct((C,A)=>{Ke(C,A),C.groups.map(T=>A.addGroup(T)),C.services.map(T=>A.addService(le(te({},T),{type:"service"}))),C.junctions.map(T=>A.addJunction(le(te({},T),{type:"junction"}))),C.edges.map(T=>A.addEdge(T))},"populateDb"),nr={parser:{yy:void 0},parse:ct(async C=>{let A=await je("architecture",C);Te.debug(A);let T=nr.parser?.yy;if(!(T instanceof ar))throw new Error("parser.parser?.yy was not a ArchitectureDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");wr(A,T)},"parse")},Or=ct(C=>`
  .edge {
    stroke-width: ${C.archEdgeWidth};
    stroke: ${C.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${C.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${C.archGroupBorderColor};
    stroke-width: ${C.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`,"getStyles"),Dr=Or,ee=ct(C=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${C}</g>`,"wrapIcon"),se={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:ee('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:ee('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:ee('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:ee('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:ee('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:Qe,blank:{body:ee("")}}},xr=ct(async function(C,A,T){let u=T.getConfigField("padding"),o=T.getConfigField("iconSize"),a=o/2,r=o/6,n=r/2;await Promise.all(A.edges().map(async f=>{let{source:t,sourceDir:g,sourceArrow:i,sourceGroup:e,target:h,targetDir:c,targetArrow:l,targetGroup:N,label:y}=ir(f),{x:p,y:L}=f[0].sourceEndpoint(),{x:R,y:M}=f[0].midpoint(),{x:S,y:B}=f[0].targetEndpoint(),Y=u+4;if(e&&(Ht(g)?p+=g==="L"?-Y:Y:L+=g==="T"?-Y:Y+18),N&&(Ht(c)?S+=c==="L"?-Y:Y:B+=c==="T"?-Y:Y+18),!e&&T.getNode(t)?.type==="junction"&&(Ht(g)?p+=g==="L"?a:-a:L+=g==="T"?a:-a),!N&&T.getNode(h)?.type==="junction"&&(Ht(c)?S+=c==="L"?a:-a:B+=c==="T"?a:-a),f[0]._private.rscratch){let tt=C.insert("g");if(tt.insert("path").attr("d",`M ${p},${L} L ${R},${M} L${S},${B} `).attr("class","edge").attr("id",qe(t,h,{prefix:"L"})),i){let x=Ht(g)?ue[g](p,r):p-n,k=kt(g)?ue[g](L,r):L-n;tt.insert("polygon").attr("points",er[g](r)).attr("transform",`translate(${x},${k})`).attr("class","arrow")}if(l){let x=Ht(c)?ue[c](S,r):S-n,k=kt(c)?ue[c](B,r):B-n;tt.insert("polygon").attr("points",er[c](r)).attr("transform",`translate(${x},${k})`).attr("class","arrow")}if(y){let x=De(g,c)?"XY":Ht(g)?"X":"Y",k=0;x==="X"?k=Math.abs(p-S):x==="Y"?k=Math.abs(L-B)/1.5:k=Math.abs(p-S)/2;let s=tt.append("g");if(await ge(s,y,{useHtmlLabels:!1,width:k,classes:"architecture-service-label"},fe()),s.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),x==="X")s.attr("transform","translate("+R+", "+M+")");else if(x==="Y")s.attr("transform","translate("+R+", "+M+") rotate(-90)");else if(x==="XY"){let E=Oe(g,c);if(E&&Er(E)){let v=s.node().getBoundingClientRect(),[m,d]=Nr(E);s.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*m*d*45})`);let D=s.node().getBoundingClientRect();s.attr("transform",`
                translate(${R}, ${M-v.height/2})
                translate(${m*D.width/2}, ${d*D.height/2})
                rotate(${-1*m*d*45}, 0, ${v.height/2})
              `)}}}}}))},"drawEdges"),Ir=ct(async function(C,A,T){let o=T.getConfigField("padding")*.75,a=T.getConfigField("fontSize"),n=T.getConfigField("iconSize")/2;await Promise.all(A.nodes().map(async f=>{let t=re(f);if(t.type==="group"){let{h:g,w:i,x1:e,y1:h}=f.boundingBox(),c=C.append("rect");c.attr("id",`group-${t.id}`).attr("x",e+n).attr("y",h+n).attr("width",i).attr("height",g).attr("class","node-bkg");let l=C.append("g"),N=e,y=h;if(t.icon){let p=l.append("g");p.html(`<g>${await ce(t.icon,{height:o,width:o,fallbackPrefix:se.prefix})}</g>`),p.attr("transform","translate("+(N+n+1)+", "+(y+n+1)+")"),N+=o,y+=a/2-1-2}if(t.label){let p=l.append("g");await ge(p,t.label,{useHtmlLabels:!1,width:i,classes:"architecture-service-label"},fe()),p.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),p.attr("transform","translate("+(N+n+4)+", "+(y+n+2)+")")}T.setElementForId(t.id,c)}}))},"drawGroups"),Rr=ct(async function(C,A,T){let u=fe();for(let o of T){let a=A.append("g"),r=C.getConfigField("iconSize");if(o.title){let g=a.append("g");await ge(g,o.title,{useHtmlLabels:!1,width:r*1.5,classes:"architecture-service-label"},u),g.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),g.attr("transform","translate("+r/2+", "+r+")")}let n=a.append("g");if(o.icon)n.html(`<g>${await ce(o.icon,{height:r,width:r,fallbackPrefix:se.prefix})}</g>`);else if(o.iconText){n.html(`<g>${await ce("blank",{height:r,width:r,fallbackPrefix:se.prefix})}</g>`);let e=n.append("g").append("foreignObject").attr("width",r).attr("height",r).append("div").attr("class","node-icon-text").attr("style",`height: ${r}px;`).append("div").html(Ge(o.iconText,u)),h=parseInt(window.getComputedStyle(e.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;e.attr("style",`-webkit-line-clamp: ${Math.floor((r-2)/h)};`)}else n.append("path").attr("class","node-bkg").attr("id","node-"+o.id).attr("d",`M0 ${r} v${-r} q0,-5 5,-5 h${r} q5,0 5,5 v${r} H0 Z`);a.attr("id",`service-${o.id}`).attr("class","architecture-service");let{width:f,height:t}=a.node().getBBox();o.width=f,o.height=t,C.setElementForId(o.id,a)}return 0},"drawServices"),Sr=ct(function(C,A,T){T.forEach(u=>{let o=A.append("g"),a=C.getConfigField("iconSize");o.append("g").append("rect").attr("id","node-"+u.id).attr("fill-opacity","0").attr("width",a).attr("height",a),o.attr("class","architecture-junction");let{width:n,height:f}=o._groups[0][0].getBBox();o.width=n,o.height=f,C.setElementForId(u.id,o)})},"drawJunctions");Je([{name:se.prefix,icons:se}]);Ne.use(or.default);function sr(C,A,T){C.forEach(u=>{A.add({group:"nodes",data:{type:"service",id:u.id,icon:u.icon,label:u.title,parent:u.in,width:T.getConfigField("iconSize"),height:T.getConfigField("iconSize")},classes:"node-service"})})}ct(sr,"addServices");function hr(C,A,T){C.forEach(u=>{A.add({group:"nodes",data:{type:"junction",id:u.id,parent:u.in,width:T.getConfigField("iconSize"),height:T.getConfigField("iconSize")},classes:"node-junction"})})}ct(hr,"addJunctions");function lr(C,A){A.nodes().map(T=>{let u=re(T);if(u.type==="group")return;u.x=T.position().x,u.y=T.position().y,C.getElementById(u.id).attr("transform","translate("+(u.x||0)+","+(u.y||0)+")")})}ct(lr,"positionNodes");function fr(C,A){C.forEach(T=>{A.add({group:"nodes",data:{type:"group",id:T.id,icon:T.icon,label:T.title,parent:T.in},classes:"node-group"})})}ct(fr,"addGroups");function cr(C,A){C.forEach(T=>{let{lhsId:u,rhsId:o,lhsInto:a,lhsGroup:r,rhsInto:n,lhsDir:f,rhsDir:t,rhsGroup:g,title:i}=T,e=De(T.lhsDir,T.rhsDir)?"segments":"straight",h={id:`${u}-${o}`,label:i,source:u,sourceDir:f,sourceArrow:a,sourceGroup:r,sourceEndpoint:f==="L"?"0 50%":f==="R"?"100% 50%":f==="T"?"50% 0":"50% 100%",target:o,targetDir:t,targetArrow:n,targetGroup:g,targetEndpoint:t==="L"?"0 50%":t==="R"?"100% 50%":t==="T"?"50% 0":"50% 100%"};A.add({group:"edges",data:h,classes:e})})}ct(cr,"addEdges");function gr(C,A,T){let u=ct((n,f)=>Object.entries(n).reduce((t,[g,i])=>{let e=0,h=Object.entries(i);if(h.length===1)return t[g]=h[0][1],t;for(let c=0;c<h.length-1;c++)for(let l=c+1;l<h.length;l++){let[N,y]=h[c],[p,L]=h[l];if(T[N]?.[p]===f)t[g]??=[],t[g]=[...t[g],...y,...L];else if(N==="default"||p==="default")t[g]??=[],t[g]=[...t[g],...y,...L];else{let M=`${g}-${e++}`;t[M]=y;let S=`${g}-${e++}`;t[S]=L}}return t},{}),"flattenAlignments"),o=A.map(n=>{let f={},t={};return Object.entries(n).forEach(([g,[i,e]])=>{let h=C.getNode(g)?.in??"default";f[e]??={},f[e][h]??=[],f[e][h].push(g),t[i]??={},t[i][h]??=[],t[i][h].push(g)}),{horiz:Object.values(u(f,"horizontal")).filter(g=>g.length>1),vert:Object.values(u(t,"vertical")).filter(g=>g.length>1)}}),[a,r]=o.reduce(([n,f],{horiz:t,vert:g})=>[[...n,...t],[...f,...g]],[[],[]]);return{horizontal:a,vertical:r}}ct(gr,"getAlignments");function ur(C,A){let T=[],u=ct(a=>`${a[0]},${a[1]}`,"posToStr"),o=ct(a=>a.split(",").map(r=>parseInt(r)),"strToPos");return C.forEach(a=>{let r=Object.fromEntries(Object.entries(a).map(([g,i])=>[u(i),g])),n=[u([0,0])],f={},t={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;n.length>0;){let g=n.shift();if(g){f[g]=1;let i=r[g];if(i){let e=o(g);Object.entries(t).forEach(([h,c])=>{let l=u([e[0]+c[0],e[1]+c[1]]),N=r[l];N&&!f[l]&&(n.push(l),T.push({[tr[h]]:N,[tr[yr(h)]]:i,gap:1.5*A.getConfigField("iconSize")}))})}}}}),T}ct(ur,"getRelativeConstraints");function dr(C,A,T,u,o,{spatialMaps:a,groupAlignments:r}){return new Promise(n=>{let f=$e("body").append("div").attr("id","cy").attr("style","display:none"),t=Ne({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${o.getConfigField("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${o.getConfigField("padding")}px`}}],layout:{name:"grid",boundingBox:{x1:0,x2:100,y1:0,y2:100}}});f.remove(),fr(T,t),sr(C,t,o),hr(A,t,o),cr(u,t);let g=gr(o,a,r),i=ur(a,o),e=t.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(h){let[c,l]=h.connectedNodes(),{parent:N}=re(c),{parent:y}=re(l);return N===y?1.5*o.getConfigField("iconSize"):.5*o.getConfigField("iconSize")},edgeElasticity(h){let[c,l]=h.connectedNodes(),{parent:N}=re(c),{parent:y}=re(l);return N===y?.45:.001},alignmentConstraint:g,relativePlacementConstraint:i});e.one("layoutstop",()=>{function h(c,l,N,y){let p,L,{x:R,y:M}=c,{x:S,y:B}=l;L=(y-M+(R-N)*(M-B)/(R-S))/Math.sqrt(1+Math.pow((M-B)/(R-S),2)),p=Math.sqrt(Math.pow(y-M,2)+Math.pow(N-R,2)-Math.pow(L,2));let Y=Math.sqrt(Math.pow(S-R,2)+Math.pow(B-M,2));p=p/Y;let tt=(S-R)*(y-M)-(B-M)*(N-R);switch(!0){case tt>=0:tt=1;break;case tt<0:tt=-1;break}let x=(S-R)*(N-R)+(B-M)*(y-M);switch(!0){case x>=0:x=1;break;case x<0:x=-1;break}return L=Math.abs(L)*tt,p=p*x,{distances:L,weights:p}}ct(h,"getSegmentWeights"),t.startBatch();for(let c of Object.values(t.edges()))if(c.data?.()){let{x:l,y:N}=c.source().position(),{x:y,y:p}=c.target().position();if(l!==y&&N!==p){let L=c.sourceEndpoint(),R=c.targetEndpoint(),{sourceDir:M}=ir(c),[S,B]=kt(M)?[L.x,R.y]:[R.x,L.y],{weights:Y,distances:tt}=h(L,R,S,B);c.style("segment-distances",tt),c.style("segment-weights",Y)}}t.endBatch(),e.run()}),e.run(),t.ready(h=>{Te.info("Ready",h),n(t)})})}ct(dr,"layoutArchitecture");var Fr=ct(async(C,A,T,u)=>{let o=u.db,a=o.getServices(),r=o.getJunctions(),n=o.getGroups(),f=o.getEdges(),t=o.getDataStructures(),g=Ze(A),i=g.append("g");i.attr("class","architecture-edges");let e=g.append("g");e.attr("class","architecture-services");let h=g.append("g");h.attr("class","architecture-groups"),await Rr(o,e,a),Sr(o,e,r);let c=await dr(a,r,n,f,o,t);await xr(i,c,o),await Ir(h,c,o),lr(o,c),Ue(void 0,g,o.getConfigField("padding"),o.getConfigField("useMaxWidth"))},"draw"),br={draw:Fr},Br={parser:nr,get db(){return new ar},renderer:br,styles:Dr};export{Br as diagram};
